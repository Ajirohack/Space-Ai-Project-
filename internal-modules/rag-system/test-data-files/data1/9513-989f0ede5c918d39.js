!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c05f1e26-205f-40e2-a6e1-c395c4035e9e",e._sentryDebugIdIdentifier="sentry-dbid-c05f1e26-205f-40e2-a6e1-c395c4035e9e")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9513],{78672:function(e,t,a){a.d(t,{F:function(){return r},S:function(){return i}});var n=a(8855),s=a(7823);let r=e=>{var t,a;let{ref:r,schemas:i,entities:l}=e,o=l.map(e=>(0,s.s7)(e.type,{id:e.id})),d=(0,n.Ek)(r),c=[];for(let e of i)c.push(...null==d?void 0:null===(t=d.items)||void 0===t?void 0:t.filter(t=>{var a;return(null===(a=t.metadata)||void 0===a?void 0:a.schema)===e}).map(e=>e.id));let u=[...c.filter(e=>!o.includes(e))];(0,n.kR)(r,u);let p=(0,s.yj)(r),m=[];for(let e of i)m.push(...null==p?void 0:null===(a=p.openTabs)||void 0===a?void 0:a.filter(t=>{var a;return(null===(a=p.tabsMap[t].metadata)||void 0===a?void 0:a.schema)===e}));let f=[...m.filter(e=>!e.startsWith("sql")&&!e.startsWith("schema")&&!o.includes(e))];(0,s.Pf)(r,f)},i=e=>{let{ref:t,snippets:a}=e,r=[...a.filter(e=>"sql"===e.type).map(e=>(0,s.s7)("sql",{id:e.id})),"sql-templates","sql-quickstarts"],i=(0,s.yj)(t).openTabs.filter(e=>e.startsWith("sql")&&!r.includes(e));(0,s.Pf)(t,i);let l=(0,n.Be)(t,"sql");(0,n.kR)(t,l?l.filter(e=>!r.includes(e.id)).map(e=>e.id):[])}},96518:function(e,t,a){a.d(t,{z:function(){return d}});var n=a(36457),s=a(64618),r=a(34549),i=a(64472),l=a(67343);async function o(e,t){let{projectRef:a,ids:n}=e,{data:s,error:r}=await (0,i.IV)("/platform/projects/{ref}/content",{headers:{Version:"2"},params:{path:{ref:a},query:{ids:n}},signal:t});return r&&(0,i.S3)(r),s.map(e=>e.id)}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.NL)();return(0,s.D)(e=>o(e),{async onSuccess(t,a,n){let{projectRef:s}=a;await i.invalidateQueries(l.$.allContentLists(s)),await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?r.Am.error("Failed to delete contents: ".concat(e.message)):t(e,a,n)},...a})}},7909:function(e,t,a){a.d(t,{A:function(){return i},N:function(){return l}});var n=a(28894),s=a(64472),r=a(67343);async function i(e,t){let{projectRef:a,id:n}=e;if(void 0===a)throw Error("projectRef is required");if(void 0===n)throw Error("Content ID is required");let{data:r,error:i}=await (0,s.U2)("/platform/projects/{ref}/content/item/{id}",{params:{path:{ref:a,id:n}},signal:t});if(i)throw(0,s.S3)(i);return r}let l=function(e){let{projectRef:t,id:a}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.$.resource(t,a),e=>{let{signal:n}=e;return i({projectRef:t,id:a},n)},{enabled:s&&void 0!==t&&void 0!==a,...l})}},89568:function(e,t,a){a.d(t,{KJ:function(){return i},md:function(){return o}});var n=a(90688),s=a(64472),r=a(67343);let i=100;async function l(e,t){let{projectRef:a,cursor:n,sort:r,name:l}=e;if(void 0===a)throw Error("projectRef is required");let{data:o,error:d}=await (0,s.U2)("/platform/projects/{ref}/content/folders",{params:{path:{ref:a},query:{type:"sql",cursor:n,limit:i.toString(),sort_by:r,sort_order:"name"===r?"asc":"desc",name:l,visibility:"user"}},signal:t});return d&&(0,s.S3)(d),{...o.data,cursor:o.cursor}}let o=function(e){let{projectRef:t,name:a,sort:s}=e,{enabled:i=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.N)(r.$.folders(t,{name:a,sort:s}),e=>{let{signal:n,pageParam:r}=e;return l({projectRef:t,cursor:r,name:a,sort:s},n)},{enabled:i&&void 0!==t,getNextPageParam:e=>e.cursor,...o})}},23844:function(e,t,a){a.d(t,{v:function(){return o}});var n=a(90688),s=a(64472),r=a(67343),i=a(89568);async function l(e,t){let{projectRef:a,cursor:n,visibility:r,favorite:l,name:o,sort:d}=e;if(void 0===a)throw Error("projectRef is required for getSqlSnippets");let{data:c,error:u}=await (0,s.U2)("/platform/projects/{ref}/content",{params:{path:{ref:a},query:{type:"sql",cursor:n,visibility:r,favorite:l,name:o,limit:i.KJ.toString(),sort_by:d,sort_order:"name"===d?"asc":"desc"}},signal:t});if(u)throw u;return{cursor:c.cursor,contents:c.data}}let o=function(e){let{projectRef:t,sort:a,name:s,visibility:i,favorite:o}=e,{enabled:d=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.N)(r.$.sqlSnippets(t,{sort:a,name:s,visibility:i,favorite:o}),e=>{let{signal:n,pageParam:r}=e;return l({projectRef:t,cursor:r,sort:a,name:s,visibility:i,favorite:o},n)},{enabled:d&&void 0!==t,getNextPageParam:e=>e.cursor,...c})}},22441:function(e,t,a){a.d(t,{x:function(){return i}});var n=a(68335),s=a(82943),r=a(52983);function i(){let{replace:e=!0,arrayKeys:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=JSON.stringify(t),i=(0,r.useMemo)(()=>new Set(t),[a]),l=(0,s.useRouter)(),o=(0,r.useMemo)(()=>Object.fromEntries(Object.entries(l.query).map(e=>{let[t,a]=e;return i.has(t)?Array.isArray(a)?[t,a]:[t,[a]]:[t,a]})),[i,l.query]),d=(0,n.Z)(o);return[o,(0,r.useCallback)(t=>{let a=d.current,n="function"==typeof t?t(a):t,s=Object.fromEntries(Object.entries({...a,...n}).filter(e=>{let[,t]=e;return!!t}));(e?l.replace:l.push)({pathname:l.pathname,query:s},void 0,{shallow:!0,scroll:!1})},[l,e])]}},16635:function(e,t,a){a.d(t,{Z:function(){return I}});var n=a(97458),s=a(28977),r=a.n(s),i=a(12708),l=a(91066),o=a(52983),d=a(34549),c=a(19851),u=a(42725),p=a(36457),m=a(64618),f=a(89089),x=a(46752);async function h(e){let{pid:t,projectRef:a,connectionString:n}=e,{result:s}=await (0,f.R)({projectRef:a,connectionString:n,sql:"select pg_terminate_backend(".concat(t,")")});return s}let v=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,p.NL)();return(0,m.D)(e=>h(e),{async onSuccess(t,a,s){let{projectRef:r}=a;await n.invalidateQueries(x.M.ongoingQueries(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?d.Am.error("Failed to abort query: ".concat(e.message)):t(e,a,n)},...a})};var y=a(28894);let g=()=>"\nselect pid, query, query_start from pg_stat_activity where state = 'active' and datname = 'postgres';\n".trim();async function j(e,t){let{projectRef:a,connectionString:n}=e,s=g().trim(),{result:r}=await (0,f.R)({projectRef:a,connectionString:n,sql:s,queryKey:["ongoing-queries"]},t);return(null!=r?r:[]).filter(e=>!e.query.startsWith(s))}let b=function(e){let{projectRef:t,connectionString:a}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,y.a)(x.M.ongoingQueries(t),e=>{let{signal:n}=e;return j({projectRef:t,connectionString:a},n)},{enabled:n&&void 0!==t,...s})};var S=a(14612),w=a(22441),N=a(73614),C=a(29859),M=a(55486),q=a(94997),L=a(86038),E=a(53355),P=a(54888),_=a(58614),k=a(34596),Q=a(54580);let D=()=>{let[e,t]=(0,w.x)({replace:!0}),{viewOngoingQueries:a}=(0,Q.UO)(),s=(0,S.Vm)(),p=(0,C.TF)(),m=(0,k.WZ)(),[f,x]=(0,o.useState)(),{data:h}=(0,u.bN)({projectRef:null==s?void 0:s.ref}),y=(null!=h?h:[]).find(e=>e.identifier===p.selectedDatabaseId),{data:g,error:j,isError:D,isLoading:I,isFetching:Z,refetch:T}=b({projectRef:null==s?void 0:s.ref,connectionString:null==y?void 0:y.connectionString},{enabled:!N.Qy||N.Qy&&(null==y?void 0:y.connectionString)!==void 0,staleTime:5e3}),O=null!=g?g:[];(0,o.useEffect)(()=>{a&&(m.setOnGoingQueriesPanelOpen(!0),t({viewOngoingQueries:void 0}))},[a]);let{mutate:F,isLoading:z}=v({onSuccess:()=>{d.Am.success("Successfully aborted query (ID: ".concat(f,")")),x(void 0)}}),A=()=>{t({viewOngoingQueries:void 0}),m.setOnGoingQueriesPanelOpen(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.yo,{open:m.ongoingQueriesPanelOpen,onOpenChange:()=>A(),"data-sentry-element":"Sheet","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:(0,n.jsxs)(M.ue,{size:"lg","data-sentry-element":"SheetContent","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:[(0,n.jsxs)(M.Tu,{"data-sentry-element":"SheetHeader","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:[(0,n.jsxs)(M.bC,{className:"flex items-center gap-x-2","data-sentry-element":"SheetTitle","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:["Running queries on"," ",(null==y?void 0:y.identifier)===(null==s?void 0:s.ref)?"primary database":"read replica",(0,n.jsx)(q.z,{type:"default",className:"px-1.5",loading:I||Z,icon:(0,n.jsx)(i.Z,{}),onClick:()=>T(),"data-sentry-element":"Button","data-sentry-source-file":"OngoingQueriesPanel.tsx"})]}),(0,n.jsxs)(M.Ei,{"data-sentry-element":"SheetDescription","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:["There ",1===O.length?"is":"are"," ",(0,n.jsx)("span",{className:"text-foreground-light",children:O.length})," quer",1===O.length?"y":"ies"," currently running"," ",(null==y?void 0:y.identifier)!==(null==s?void 0:s.ref)?"on replica ".concat(null==y?void 0:y.identifier):""]})]}),(0,n.jsxs)("div",{className:"max-h-full h-full divide-y overflow-y-auto",children:[D&&(0,n.jsx)("div",{className:"flex items-center justify-center h-full px-16",children:(0,n.jsx)(c.Z,{subject:"Failed to retrieve ongoing queries",error:j})}),0===O.length&&(0,n.jsxs)("div",{className:"flex flex-col gap-y-2 items-center justify-center h-full text-foreground-light text-sm",children:[(0,n.jsxs)("span",{children:["No queries are currently running on the"," ",(null==y?void 0:y.identifier)!==(null==s?void 0:s.ref)?"read replica ".concat(null==y?void 0:y.identifier):(null!=h?h:[]).length>1?"primary database":"database"]}),(0,n.jsx)(q.z,{type:"default",loading:I||Z,icon:(0,n.jsx)(i.Z,{}),onClick:()=>T(),children:"Refresh"})]}),O.map(e=>(0,n.jsxs)(M.DN,{className:"flex justify-between gap-x-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2 w-full",children:[(0,n.jsx)(L.d,{hideLineNumbers:!0,value:e.query,language:"sql",className:(0,E.cn)("max-w-none max-h-52 w-full","!bg-transparent !py-3 !px-3.5 prose dark:prose-dark","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap")}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsxs)("p",{className:"text-foreground-light text-xs",children:["PID: ",e.pid]}),(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:"•"}),(0,n.jsxs)("p",{className:"text-foreground-light text-xs",children:["Started since: ",r()(e.query_start).format("DD MMM YYYY HH:mm (ZZ)")]})]})]}),(0,n.jsxs)(P.u,{children:[(0,n.jsx)(P.aJ,{asChild:!0,children:(0,n.jsx)(q.z,{type:"warning",className:"px-1.5",icon:(0,n.jsx)(l.Z,{}),onClick:()=>x(e.pid)})}),(0,n.jsx)(P._v,{side:"bottom",children:"Abort query"})]})]},e.pid))]})]})}),(0,n.jsx)(_.Z,{loading:z,variant:"warning",title:"Confirm to abort this query? (ID: ".concat(f,")"),visible:void 0!==f,onCancel:()=>x(void 0),onConfirm:()=>{void 0!==f&&F({pid:f,projectRef:null==s?void 0:s.ref,connectionString:null==y?void 0:y.connectionString})},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"OngoingQueriesPanel.tsx",children:(0,n.jsx)("p",{className:"text-sm",children:"This will force the query to stop running."})})]})};var I=(0,a(87358).Q)(e=>{let{children:t}=e;return(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)(D,{"data-sentry-element":"OngoingQueriesPanel","data-sentry-source-file":"SQLEditorLayout.tsx"})]})})},90768:function(e,t,a){a.d(t,{d:function(){return ta}});var n=a(97458),s=a(40540),r=a(23382),i=a(54580),l=a(29375),o=a(54528),d=a(14612),c=a(73614),u=a(65770),p=a(99740),m=a(19714),f=a(77408),x=a(92026),h=a(82943),v=a(52983),y=a(34549),g=a(34596),j=a(620),b=a(54888),S=a(34814),w=a(94997),N=a(13030);let C=["templates","quickstarts"];function M(){let{ref:e}=(0,i.UO)(),t=(0,h.useRouter)();return(0,n.jsx)("div",{"data-sentry-component":"SqlEditorMenuStaticLinks","data-sentry-source-file":"SqlEditorMenuStaticLinks.tsx",children:C.map(a=>{let s=t.asPath==="/project/".concat(e,"/sql/").concat(a);return(0,n.jsx)(N.G,{title:"Templates",isActive:s,isOpened:!1,href:"/project/".concat(e,"/sql/").concat(a),className:"capitalize",children:a},a)})})}var q=a(37905),L=a(89462),E=a.n(L),P=a(60728),_=a(28894),k=a(64472),Q=a(67343);async function D(e,t){let{projectRef:a,cumulative:n,type:s,name:r}=e;if(void 0===a)throw Error("projectRef is required");let{data:i,error:l}=await (0,k.U2)("/platform/projects/{ref}/content/count",{params:{path:{ref:a},query:{...s&&{type:s},...r&&{name:r}}},...n?{}:{headers:{Version:"2"}},signal:t});if(l)throw(0,k.S3)(l);return i}let I=function(e){let{projectRef:t,cumulative:a,type:n,name:s}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.a)(Q.$.count(t,n,{cumulative:a,name:s}),e=>{let{signal:r}=e;return D({projectRef:t,cumulative:a,type:n,name:s},r)},{enabled:r&&void 0!==t,...i})};var Z=a(90688);async function T(e,t){let{projectRef:a,type:n,name:s,limit:r=10,sort:i,cursor:l}=e;if(void 0===a)throw Error("projectRef is required for getContent");let{data:o,error:d}=await (0,k.U2)("/platform/projects/{ref}/content",{params:{path:{ref:a},query:{type:n,name:s,sort_by:i,limit:r.toString(),cursor:l}},signal:t});return d&&(0,k.S3)(d),{cursor:o.cursor,content:o.data}}let O=function(e){let{projectRef:t,type:a,name:n,limit:s,sort:r}=e,{enabled:i=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Z.N)(Q.$.infiniteList(t,{type:a,name:n,limit:s,sort:r}),e=>{let{signal:i,pageParam:l}=e;return T({projectRef:t,type:a,name:n,limit:s,sort:r,cursor:l},i)},{enabled:i&&void 0!==t,getNextPageParam:e=>e.cursor,...l})};var F=a(89568),z=a(53355),A=a(76430),R=a(23522);let B=e=>{var t;let{search:a}=e,{ref:s}=(0,i.UO)(),{data:r,isLoading:l,hasNextPage:o,fetchNextPage:d,isFetchingNextPage:c}=O({projectRef:s,type:"sql",limit:F.KJ,name:0===a.length?void 0:a},{keepPreviousData:!0}),{data:u,isLoading:p}=I({projectRef:s,cumulative:!0,type:"sql",name:a},{keepPreviousData:!0}),m=null!==(t=null==u?void 0:u.count)&&void 0!==t?t:0,f=(0,v.useMemo)(()=>null==r?void 0:r.pages.flatMap(e=>e.content),[null==r?void 0:r.pages]);return(0,n.jsxs)("div",{className:"flex flex-col flex-grow","data-sentry-component":"SearchList","data-sentry-source-file":"SearchList.tsx",children:[l?(0,n.jsx)("div",{className:"px-4 py-1 pb-2.5",children:(0,n.jsx)(q.Z,{className:"animate-spin",size:14})}):u?(0,n.jsxs)("p",{className:"px-4 pb-2 text-sm text-foreground-lighter",children:[m," result",m>1?"s":""," found"]}):null,l?(0,n.jsxs)("div",{className:"px-4 flex flex-col gap-y-1",children:[(0,n.jsx)(R.Z,{className:"py-2.5"}),(0,n.jsx)(R.Z,{className:"py-2.5 w-5/6"}),(0,n.jsx)(R.Z,{className:"py-2.5 w-3/4"})]}):(0,n.jsx)(P.Z,{items:f,ItemComponent:e=>(0,n.jsx)(U,{snippet:e.item}),itemProps:{},getItemSize:()=>28,hasNextPage:o,isLoadingNextPage:c,onLoadNextPage:()=>d()})]})},U=e=>{let{snippet:t}=e,{ref:a,id:s}=(0,i.UO)(),r=t.id===s;return(0,n.jsxs)(E(),{className:(0,z.cn)("h-full flex items-center gap-x-3 pl-4 hover:bg-control transition",r&&"!bg-selection [&>svg]:fill-foreground [&>p]:text-foreground"),href:"/project/".concat(a,"/sql/").concat(t.id),"data-sentry-element":"Link","data-sentry-component":"SearchListItem","data-sentry-source-file":"SearchList.tsx",children:[(0,n.jsx)(A.KK,{size:16,strokeWidth:1.5,className:"w-5 h-5 -ml-0.5 transition-colors fill-foreground-muted group-aria-selected:fill-foreground","data-sentry-element":"SQL_ICON","data-sentry-source-file":"SearchList.tsx"}),(0,n.jsx)("p",{className:"transition text-sm text-foreground-light truncate",children:t.name})]})};var W=a(87076),V=a(97687),G=a.n(V),K=a(36030),$=a(66346),J=a(49613),Y=a(34024),H=a(86038),X=a(3064),ee=a(1881),et=e=>{var t;let{id:a,...s}=e,r=null===(t=(0,j.B0)().snippets[a])||void 0===t?void 0:t.snippet,i=G()(null==r?void 0:r.name),[l,o]=(0,v.useState)("CLI"),d=[{id:"migration",label:"Migration",title:"Download as migration",description:"Download the snippet in a new migration named `".concat(i,"`"),cli:(0,ee.kL)(a,i),npm:(0,ee.kL)(a,i,!0)},{id:"seed",label:"Seed file",title:"Download as seed file",description:"If your query consists of sample data, append the snippet to the end of `supabase/seed.sql`",cli:(0,ee.YI)(a),npm:(0,ee.YI)(a,!0)},{id:"sql",label:"SQL file",title:"Download as SQL file",description:"Download the snippet directly into a new SQL file named `".concat(i,".sql`"),cli:(0,ee.y4)(a,i),npm:(0,ee.y4)(a,i,!0)}];return(0,n.jsx)(J.Z,{hideFooter:!0,showCloseButton:!0,size:"xlarge",header:(0,n.jsx)("p",{children:"Download snippet as local migration file via the Supabase CLI."}),...s,"data-sentry-element":"Modal","data-sentry-component":"DownloadSnippetModal","data-sentry-source-file":"DownloadSnippetModal.tsx",children:(0,n.jsxs)("div",{className:"flex flex-col items-start justify-between gap-4 relative pt-2",children:[(0,n.jsx)(Y.Z,{type:"underlined",listClassNames:"pl-5","data-sentry-element":"Tabs","data-sentry-source-file":"DownloadSnippetModal.tsx",children:d.map(e=>(0,n.jsx)(Y.Z.Panel,{id:e.id,label:e.label,children:(0,n.jsxs)(J.Z.Content,{className:"!py-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("p",{className:"text-base",children:e.title}),(0,n.jsx)(X.U,{className:"text-sm text-scale-1000 [&>p>code]:!break-normal",content:e.description})]}),(0,n.jsx)($.Z,{width:50,options:["CLI","NPM"],activeOption:l,borderOverride:"border-muted",onClickOption:()=>"CLI"===l?o("NPM"):o("CLI")})]}),(0,n.jsx)("pre",{children:(0,n.jsx)(H.d,{language:"bash",className:"language-bash prose dark:prose-dark max-w-none",children:"CLI"===l?e.cli:e.npm})})]})},e.id))}),(0,n.jsxs)(J.Z.Content,{className:"w-full flex items-center justify-between pt-0","data-sentry-element":"unknown","data-sentry-source-file":"DownloadSnippetModal.tsx",children:[(0,n.jsx)("p",{className:"text-xs text-lighter",children:"Run this command from your project directory"}),(0,n.jsxs)("div",{className:"flex justify-between items-center gap-x-2",children:[(0,n.jsx)(w.z,{asChild:!0,type:"default",icon:(0,n.jsx)(K.Z,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"DownloadSnippetModal.tsx",children:(0,n.jsx)(E(),{href:"https://supabase.com/docs/guides/deployment/database-migrations",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"DownloadSnippetModal.tsx",children:"About migrations"})}),(0,n.jsx)(w.z,{asChild:!0,type:"default",icon:(0,n.jsx)(K.Z,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"DownloadSnippetModal.tsx",children:(0,n.jsx)(E(),{href:"https://supabase.com/docs/guides/cli/local-development",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"DownloadSnippetModal.tsx",children:"About CLI"})})]})]})]})})},ea=a(52585),en=a(54638),es=a(87699),er=a(86848),ei=a(5394),el=a(7909),eo=a(63870),ed=a(8663),ec=a(17741),eu=a(1006),ep=a(55204),em=a(1973),ef=a(88990),ex=a(59916),eh=a(21758);let ev=e=>{var t;let{visible:a,snippets:s=[],onClose:r}=e,{ref:l}=(0,i.UO)(),o=(0,j.B0)(),[d,c]=(0,v.useState)(!1),[u,p]=(0,v.useState)(),{mutateAsync:f,isLoading:x}=(0,ed.P)(),{mutateAsync:h,isLoading:g}=(0,eo.R)({onError:e=>{y.Am.error("Failed to move query: ".concat(e.message))}}),b="new-folder"===u?ei.Ry({name:ei.Z_().min(1,"Please provide a name for the folder")}).refine(e=>!o.allFolderNames.includes(e.name),{message:"This folder name already exists",path:["name"]}):ei.Ry({}),S=(0,er.cI)({mode:"onSubmit",reValidateMode:"onSubmit",resolver:(0,ea.F)(b),defaultValues:{name:""}}),N=(0,j.Gd)(l),C="root"===u?"Root of the editor":"new-folder"===u?"Create a new folder":null===(t=N.find(e=>e.id===u))||void 0===t?void 0:t.name,M=1===s.length&&(!s[0].folder_id&&"root"===u||s[0].folder_id===u),q=1===s.length&&(!s[0].folder_id&&"root"===u||s[0].folder_id===u),L=async e=>{if(!l)return console.error("Project ref is required");try{let t=u;if("new-folder"===u&&"name"in e){let{id:a}=await f({projectRef:l,name:e.name});t=a}await Promise.all(s.map(async e=>{let a=null==e?void 0:e.content;if(void 0===a){let{content:t}=await (0,el.A)({projectRef:l,id:e.id});"sql"in t&&(a=t)}if(void 0===a)return y.Am.error("Failed to save snippet: Unable to retrieve snippet contents");await h({projectRef:l,payload:{id:e.id,type:"sql",name:e.name,description:e.description,visibility:e.visibility,project_id:e.project_id,owner_id:e.owner_id,folder_id:"root"===u?null:t,content:a}})})),y.Am.success("Successfully moved ".concat(1===s.length?'"'.concat(s[0].name,'"'):"".concat(s.length," snippets")," to ").concat("root"===u?"the root of the editor":C)),s.forEach(e=>{o.updateSnippet({id:e.id,snippet:{...e,folder_id:"root"===u?null:t},skipSave:!0})}),r()}catch(e){y.Am.error("Failed to create new folder: ".concat(e.message))}};return(0,v.useEffect)(()=>{if(a&&void 0!==s){if(1===s.length){var e;p(null!==(e=s[0].folder_id)&&void 0!==e?e:"root")}else p("root");S.reset({name:""})}},[a,s]),(0,n.jsx)(ec.Vq,{open:a,onOpenChange:()=>r(),"data-sentry-element":"Dialog","data-sentry-component":"MoveQueryModal","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsx)(ec.cZ,{"data-sentry-element":"DialogContent","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsx)(eu.l0,{...S,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsxs)("form",{id:"move-snippet",onSubmit:S.handleSubmit(L),children:[(0,n.jsxs)(ec.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsxs)(ec.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"MoveQueryModal.tsx",children:["Move ",1===s.length?'"'.concat(s[0].name,'"'):"".concat(s.length)," ","snippet",s.length>1?"s":""," to a folder"]}),(0,n.jsxs)(ec.Be,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"MoveQueryModal.tsx",children:["Select which folder to move your quer",s.length>1?"ies":"y"," to"]})]}),(0,n.jsx)(ec.P3,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,n.jsxs)(ec.VO,{className:"py-5 flex flex-col gap-y-4","data-sentry-element":"DialogSection","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(ep._,{className:"text-foreground-light","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:"Select a folder"}),(0,n.jsxs)(em.J2,{open:d,onOpenChange:c,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsx)(em.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsx)(w.z,{block:!0,size:"small",type:"default",className:"pr-2 justify-between",iconRight:(0,n.jsx)(en.Z,{className:"text-foreground-light rotate-90",strokeWidth:2,size:12}),"data-sentry-element":"Button","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[C,M&&" (Current)"]})})}),(0,n.jsx)(em.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsxs)(ef.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsx)(ef.sZ,{placeholder:"Find folder...","data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,n.jsxs)(ef.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsx)(ef.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:"No folders found"}),(0,n.jsx)(ef.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsxs)(ex.xr,{className:(N||[]).length>6?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsxs)(ef.di,{value:"root",className:"cursor-pointer w-full justify-between",onSelect:()=>{c(!1),p("root")},onClick:()=>{c(!1),p("root")},"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsxs)("span",{children:["Root of the editor",1===s.length&&null===s[0].folder_id&&" (Current)"]}),"root"===u&&(0,n.jsx)(es.Z,{size:14})]},"root"),null==N?void 0:N.map(e=>(0,n.jsxs)(ef.di,{value:e.id,className:"cursor-pointer w-full justify-between",onSelect:()=>{c(!1),p(e.id)},onClick:()=>{c(!1),p(e.id)},children:[(0,n.jsxs)("span",{children:[e.name,1===s.length&&s[0].folder_id===e.id&&" (Current)"]}),e.id===u&&(0,n.jsx)(es.Z,{size:14})]},e.id))]})}),(0,n.jsx)(ef.zz,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,n.jsx)(ef.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:(0,n.jsxs)(ef.di,{className:"cursor-pointer w-full justify-start gap-x-2",onSelect:e=>{c(!1),p("new-folder")},onClick:()=>{c(!1),p("new-folder")},"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsx)(m.Z,{size:14,strokeWidth:1.5,"data-sentry-element":"Plus","data-sentry-source-file":"MoveQueryModal.tsx"}),(0,n.jsx)("p",{children:"New folder"})]})})]})]})})]})]}),"new-folder"===u&&(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,n.jsx)(eu.Wi,{name:"name",control:S.control,render:e=>{let{field:t}=e;return(0,n.jsxs)(eu.xJ,{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(eu.lX,{children:"Provide a name for your new folder"}),(0,n.jsx)(eu.NI,{children:(0,n.jsx)(eh.I,{autoFocus:!0,...t,autoComplete:"off",disabled:g||x})}),(0,n.jsx)(eu.zG,{})]})}})})]}),(0,n.jsxs)(ec.cN,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"MoveQueryModal.tsx",children:[(0,n.jsx)(w.z,{type:"default",disabled:g||x,onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"MoveQueryModal.tsx",children:"Cancel"}),(0,n.jsx)(w.z,{type:"primary",htmlType:"submit",disabled:q,loading:g||x,"data-sentry-element":"Button","data-sentry-source-file":"MoveQueryModal.tsx",children:"Move file"})]})]})})})})};var ey=a(8451),eg=a(29139),ej=a(7611),eb=a(7823),eS=a(45057),ew=a(52286),eN=a(21792),eC=a(91226),eM=e=>{let{snippet:t={},visible:a,onCancel:s,onComplete:r}=e,{ref:l}=(0,i.UO)(),o=(0,ej.l)(),d=(0,j.B0)(),{data:c}=(0,eg.Gl)({orgSlug:null==o?void 0:o.slug}),u="sql"===t.type,p=(0,W.Ff)(),m=(0,eC.$w)(c),{id:f,name:x,description:h}=t,[g,b]=(0,v.useState)(x),[S,N]=(0,v.useState)(h),{mutate:C,isLoading:M}=(0,ey.g)({onSuccess:e=>{let{title:t,description:a}=e;b(t),S||N(a)},onError:e=>{y.Am.error("Failed to rename query: ".concat(e.message))}}),q=async()=>{if("content"in t&&u)C({sql:t.content.sql});else try{let{content:e}=await (0,el.A)({projectRef:l,id:t.id});"sql"in e&&C({sql:e.sql})}catch(e){y.Am.error("Unable to generate title based on query contents")}},{mutateAsync:L}=(0,eo.R)(),E=async(e,a)=>{let{setSubmitting:n}=a;if(!l)return console.error("Project ref is required");if(!f)return console.error("Snippet ID is required");n(!0);try{let e=t;if("content"in e||(e=await (0,el.A)({projectRef:l,id:f}),d.addSnippet({projectRef:l,snippet:e})),await L({projectRef:l,payload:{...e,name:g,description:S}}),d.renameSnippet({id:f,name:g,description:S}),p&&l){let e=(0,eb.s7)("sql",{id:f});(0,eb.mh)(l,e,g)}y.Am.success("Successfully renamed snippet!"),r&&r()}catch(e){n(!1),y.Am.error("Failed to rename snippet: ".concat(e.message))}};return(0,v.useEffect)(()=>{b(x),N(h)},[t.id]),(0,n.jsx)(J.Z,{visible:a,onCancel:s,hideFooter:!0,header:"Rename",size:"small","data-sentry-element":"Modal","data-sentry-component":"RenameQueryModal","data-sentry-source-file":"RenameQueryModal.tsx",children:(0,n.jsx)(eS.Z,{onReset:s,validateOnBlur:!0,initialValues:{name:null!=x?x:"",description:null!=h?h:""},validate:()=>{let e={};return g||(e.name="Please enter a query name"),e},onSubmit:E,"data-sentry-element":"Form","data-sentry-source-file":"RenameQueryModal.tsx",children:e=>{let{isSubmitting:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.Z.Content,{className:"space-y-4",children:[(0,n.jsx)(ew.Z,{label:"Name",id:"name",name:"name",value:g,onChange:e=>b(e.target.value)}),(0,n.jsx)("div",{className:"flex w-full justify-end mt-2",children:!m&&(0,n.jsx)(w.z,{type:"default",onClick:()=>q(),size:"tiny",disabled:M,children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"scale-75",children:(0,n.jsx)(eN.c,{loading:M})}),(0,n.jsx)("span",{children:"Rename with Supabase AI"})]})})}),(0,n.jsx)(ew.Z.TextArea,{label:"Description",id:"description",placeholder:"Describe query",size:"medium",textAreaClassName:"resize-none",value:S,onChange:e=>N(e.target.value)})]}),(0,n.jsx)(J.Z.Separator,{}),(0,n.jsxs)(J.Z.Content,{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(w.z,{htmlType:"reset",type:"default",onClick:s,disabled:t,children:"Cancel"}),(0,n.jsx)(w.z,{htmlType:"submit",loading:t,disabled:t,children:"Rename query"})]})]})}})})},eq=a(83141),eL=a(8343);let eE=()=>(0,n.jsx)(N.Cf,{title:"No private queries created yet",description:"Queries will be automatically saved once you start writing in the editor",className:"mx-4","data-sentry-element":"InnerSideBarEmptyPanel","data-sentry-component":"EmptyPrivateQueriesPanel","data-sentry-source-file":"PrivateSqlSnippetEmpty.tsx",children:(0,n.jsx)("div",{className:"top-0 left-6 flex flex-col opacity-50 cursor-not-allowed bg-dash-sidebar h-content -mb-7 pointer-events-none scale-75",children:(0,n.jsxs)("div",{className:"relative h-content",children:[(0,n.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-10",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent from-80% to-100% to-background-surface-100 dark:to-background-surface-75"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent from-50% to-100% to-background-surface-100 dark:to-background-surface-75"})]}),(0,n.jsx)("div",{className:"absolute left-[128px] bottom-[21px] text-foreground-muted z-10 pointer-events-none",children:(0,n.jsx)(eL.Z,{size:16,className:"text-foreground-light",strokeWidth:1.5,"data-sentry-element":"Pointer","data-sentry-source-file":"PrivateSqlSnippetEmpty.tsx"})}),[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)("div",{className:"border-l pointer-events-none",children:(0,n.jsx)(A.A7,{isSelected:2===t,id:"dummy-".concat(t+1),name:"dummy_query_".concat(t+1),level:1,xPadding:16})},"dummy-".concat(t+1)))]})})});var eP=a(12717),e_=a(78672),ek=a(96518),eQ=a(36457),eD=a(64618);async function eI(e,t){let{projectRef:a,ids:n}=e,{data:s,error:r}=await (0,k.IV)("/platform/projects/{ref}/content/folders",{params:{path:{ref:a},query:{ids:n}},signal:t});if(r)throw(0,k.S3)(r);return s}let eZ=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:a=!0,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,eQ.NL)();return(0,eD.D)(e=>eI(e),{async onSuccess(e,n,r){let{projectRef:i}=n;a&&await s.invalidateQueries(Q.$.folders(i)),await (null==t?void 0:t(e,n,r))},async onError(t,a,n){void 0===e?y.Am.error("Failed to delete folder: ".concat(t.message)):e(t,a,n)},...n})};var eT=a(23844),eO=a(52042),eF=a(35798),ez=a(4752),eA=a(11142),eR=a(69647),eB=a(65422),eU=a(58614),eW=a(34653),eV=a(17634),eG=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3",children:[(0,n.jsx)(eV.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,n.jsx)(eV.O,{className:"w-40 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,n.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3",children:[(0,n.jsx)(eV.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,n.jsx)(eV.O,{className:"w-32 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,n.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3 opacity-75",children:[(0,n.jsx)(eV.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,n.jsx)(eV.O,{className:"w-20 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,n.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3 opacity-50",children:[(0,n.jsx)(eV.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,n.jsx)(eV.O,{className:"w-40 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]}),(0,n.jsxs)("div",{className:"flex flex-row h-6 px-3 items-center gap-3 opacity-25",children:[(0,n.jsx)(eV.O,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"}),(0,n.jsx)(eV.O,{className:"w-20 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"SQLEditorLoadingSnippets.tsx"})]})]});let eK={id:0,name:"",parent:null,children:[]},e$=e=>{var t,a;if(void 0===e)return[eK];let{folders:n,contents:s}=e,r=(null==n?void 0:n.map(e=>{var t;let{id:a,name:n}=e;return{id:a,name:n,parent:0,isBranch:!0,children:null!==(t=null==s?void 0:s.filter(e=>e.folder_id===a).map(e=>e.id))&&void 0!==t?t:[],metadata:e}}))||[],i=(null==s?void 0:s.map(e=>{let{id:t,name:a,folder_id:n}=e;return{id:t,name:a,parent:null!=n?n:0,children:[],metadata:e}}))||[];return[{id:0,name:"",parent:null,children:[...null===(t=n||[])||void 0===t?void 0:t.map(e=>e.id),...null===(a=(s||[]).filter(e=>!e.folder_id))||void 0===a?void 0:a.map(e=>e.id)]},...r,...i]};function eJ(e){let t=new Set,a=e.filter(e=>0===e.parent);if(a.length>0){let e=a[a.length-1];"string"==typeof e.id&&t.add(e.id),a.forEach(e=>{if(e.children.length>0){let a=e.children[e.children.length-1];"string"==typeof a&&t.add(a)}})}return t}var eY=a(28824);async function eH(e,t){let{projectRef:a,folderId:n,cursor:s,sort:r,name:i}=e;if(void 0===a)throw Error("projectRef is required");if(void 0===n)throw Error("folderId is required");let{data:l,error:o}=await (0,k.U2)("/platform/projects/{ref}/content/folders/{id}",{params:{path:{ref:a,id:n},query:{cursor:s,limit:F.KJ.toString(),sort_by:r,sort_order:"name"===r?"asc":"desc",name:i}},signal:t});return o&&(0,k.S3)(o),{...l.data,cursor:l.cursor}}let eX=function(e){let{projectRef:t,folderId:a,name:n,sort:s}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Z.N)(Q.$.folderContents(t,a,{name:n,sort:s}),e=>{let{signal:r,pageParam:i}=e;return eH({projectRef:t,folderId:a,cursor:i,name:n,sort:s},r)},{enabled:r&&void 0!==t&&void 0!==a,getNextPageParam:e=>e.cursor,...i})};var e0=a(68335),e1=a(4995),e4=a(33378),e2=a(44640),e5=a(70059),e3=a(59113),e8=a(94122),e6=a(73110),e7=a(71130);let e9=e=>{let{element:t,isBranch:a,isExpanded:r,level:o,status:d,isSelected:c,isMultiSelected:p,getNodeProps:f,onSelectCreate:x,onSelectDelete:y,onSelectRename:g,onSelectMove:b,onSelectShare:S,onSelectUnshare:N,onSelectDownload:C,onSelectDuplicate:M,onEditSave:q,onMultiSelect:L,isLastItem:P,hasNextPage:_,fetchNextPage:k,isFetchingNextPage:Q,sort:D,name:I,onFolderContentsChange:Z,...T}=e,O=(0,h.useRouter)(),{id:F,ref:z}=(0,eY.U)(),{profile:R}=(0,u.Un)(),{className:B,onClick:U}=f(),W=(0,j.B0)(),V=(null==R?void 0:R.id)===(null==t?void 0:t.metadata.owner_id),G="project"===t.metadata.visibility,$="editing"===d,J=(0,l.Xo)(s.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==R?void 0:R.id},subject:{id:null==R?void 0:R.id}}),Y=0===t.parent?void 0:t.parent,H=a&&r,{data:X,isSuccess:ee,isLoading:et,isFetchingNextPage:ea,hasNextPage:en,fetchNextPage:es,isPreviousData:er,isFetching:ei}=eX({projectRef:z,folderId:null!=Y?Y:t.id,name:I,sort:D},{enabled:H,keepPreviousData:!0});(0,v.useEffect)(()=>{z&&ee&&X.pages.forEach(e=>{var t;null===(t=e.contents)||void 0===t||t.forEach(e=>{W.addSnippet({projectRef:z,snippet:e})})})},[z,null==X?void 0:X.pages]);let el=(0,e0.Z)(Z);(0,v.useEffect)(()=>{if(H){var e;null===(e=el.current)||void 0===e||e.call(el,{isLoading:et||er&&ei,snippets:null==X?void 0:X.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]})})}},[null==X?void 0:X.pages,ei,et,er,H]);let eo=void 0!==Y;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e7.xV,{modal:!1,"data-sentry-element":"ContextMenu_Shadcn_","data-sentry-source-file":"SQLEditorTreeViewItem.tsx",children:[(0,n.jsx)(e7.W4,{asChild:!0,"data-sentry-element":"ContextMenuTrigger_Shadcn_","data-sentry-source-file":"SQLEditorTreeViewItem.tsx",children:(0,n.jsx)(A.A7,{className:B,level:o,isExpanded:r,isBranch:a,isSelected:c,isPreview:T.isPreview,isEditing:$,isLoading:H&&et||"saving"===d,onEditSubmit:e=>{void 0!==q&&q(e)},onClick:e=>{a?$||U(e):e.shiftKey&&"new"!==F?null==L||L(t.id):O.push("/project/".concat(z,"/sql/").concat(t.id))},...T,name:t.name,xPadding:16,"data-sentry-element":"TreeViewItem","data-sentry-source-file":"SQLEditorTreeViewItem.tsx"})}),(0,n.jsx)(e7.h_,{onCloseAutoFocus:e=>e.stopPropagation(),"data-sentry-element":"ContextMenuContent_Shadcn_","data-sentry-source-file":"SQLEditorTreeViewItem.tsx",children:a?(0,n.jsxs)(n.Fragment,{children:[void 0!==x&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>x(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(m.Z,{size:14}),"Create new snippet"]}),void 0!==g&&V&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>g(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e1.Z,{size:14}),"Rename folder"]}),void 0!==y&&V&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e7.uP,{}),(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>y(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e4.Z,{size:14}),"Delete folder"]})]})]}):p?(0,n.jsxs)(n.Fragment,{children:[void 0!==b&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>b(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e2.Z,{size:14}),"Move selected queries"]}),(0,n.jsx)(e7.uP,{}),void 0!==y&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>y(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e4.Z,{size:14}),"Delete selected queries"]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e7.Zo,{asChild:!0,className:"gap-x-2",onSelect:()=>{},onFocusCapture:e=>e.stopPropagation(),children:(0,n.jsxs)(E(),{href:"/project/".concat(z,"/sql/").concat(t.id),target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(K.Z,{size:14}),"Open in new tab"]})}),(0,n.jsx)(e7.uP,{}),void 0!==g&&V&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>g(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e1.Z,{size:14}),"Rename query"]}),void 0!==b&&V&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>b(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e2.Z,{size:14}),"Move query"]}),void 0!==S&&!G&&J&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>S(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e5.Z,{size:14}),"Share query with team"]}),void 0!==N&&G&&V&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>N(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e3.Z,{size:14}),"Unshare query with team"]}),void 0!==M&&J&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>M(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e8.Z,{size:14}),"Duplicate query"]}),void 0!==C&&i.Qy&&(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>C(),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(e6.Z,{size:14}),"Download as migration file"]}),void 0!==y&&V&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e7.uP,{}),(0,n.jsxs)(e7.Zo,{className:"gap-x-2",onSelect:()=>y(),children:[(0,n.jsx)(e4.Z,{size:14}),"Delete query"]})]})]})})]}),(eo?en:_)&&"string"==typeof t.id&&P&&(0,n.jsx)("div",{className:"px-4 py-1",style:{paddingLeft:!t.isBranch&&t.level>1?48*(t.level-1):void 0},children:(0,n.jsx)(w.z,{type:"outline",size:"tiny",block:!0,loading:eo?ea:Q,disabled:eo?ea:Q,onClick:function(){eo?es():"function"==typeof k&&k()},children:"Load More"})})]})},te={shared:!1,favorite:!1,private:!0},tt=e=>{var t,a,s,r,l,p,m,f,x;let{sort:g="inserted_at"}=e,b=(0,h.useRouter)(),{ref:S,id:w}=(0,i.UO)(),{profile:C}=(0,u.Un)(),M=(0,d.Vm)(),q=(0,j.B0)(),L=(0,eb.yj)(S),E=(0,eW.R)(L),P=(0,W.Ff)(),[_,k]=(0,o._)(c.dA.SQL_EDITOR_SECTION_STATE(null!=S?S:""),te),{shared:Q,favorite:D,private:Z}=_,[T,O]=(0,v.useState)(!1),[z,R]=(0,v.useState)(!1),[B,U]=(0,v.useState)(!1),[V,G]=(0,v.useState)([]),[K,$]=(0,v.useState)([]),[J,Y]=(0,v.useState)(),[H,X]=(0,v.useState)(),[ea,en]=(0,v.useState)(),[es,er]=(0,v.useState)(),[ei,ed]=(0,v.useState)(),ec=null===(t=q.snippets[w])||void 0===t?void 0:t.snippet,{data:eu,isSuccess:ep,isLoading:em,isPreviousData:ef,isFetching:ex,hasNextPage:eh,fetchNextPage:ey,isFetchingNextPage:eg}=(0,F.md)({projectRef:S,sort:g},{keepPreviousData:!0}),[ej,eS]=(0,v.useState)({}),ew=(0,v.useMemo)(()=>{var e;let t=null!==(e=null==eu?void 0:eu.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]}))&&void 0!==e?e:[],a=Object.values(ej).reduce((e,t)=>{var a;let n=(null!==(a=t.snippets)&&void 0!==a?a:[]).filter(t=>!e.snippetIds.has(t.id)),s=new Set(n.map(e=>e.id));return{snippets:[...e.snippets,...n],isLoading:e.isLoading||t.isLoading,snippetIds:new Set([...e.snippetIds,...s])}},{snippets:t,isLoading:em||ef&&ex,snippetIds:new Set(t.map(e=>e.id))});return ec&&"user"===ec.visibility&&!a.snippetIds.has(ec.id)&&(a.snippetIds.add(ec.id),a.snippets=[...a.snippets,ec]),a},[null==eu?void 0:eu.pages,ej,em,ef,ex,ec]),eN=(0,v.useMemo)(()=>{var e,t;return null!==(t=null===(e=ew.snippets)||void 0===e?void 0:e.filter(e=>"user"===e.visibility).sort((e,t)=>"name"===g?e.name.localeCompare(t.name):new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()))&&void 0!==t?t:[]},[ew.snippets,g]),eC=(0,j.Gd)(S),{data:eL}=I({projectRef:S,type:"sql"}),eQ=null!==(r=null==eL?void 0:eL.private)&&void 0!==r?r:0,eD=(0,v.useMemo)(()=>0===eC.length&&0===eN.length?[eK]:e$({folders:eC,contents:eN}),[eC,eN]),eI=(0,v.useMemo)(()=>eJ(eD),[eD]),{data:eV,isLoading:eY,hasNextPage:eH,fetchNextPage:eX,isFetchingNextPage:e0,isSuccess:e1}=(0,eT.v)({projectRef:S,favorite:!0,sort:g},{enabled:D,keepPreviousData:!0}),e4=(0,v.useMemo)(()=>{var e,t;let a=null!==(e=null==eV?void 0:eV.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]}))&&void 0!==e?e:[];return ec&&ec.favorite&&!a.find(e=>e.id===ec.id)&&a.push(ec),null!==(t=a.map(e=>({...e,folder_id:void 0})).sort((e,t)=>"name"===g?e.name.localeCompare(t.name):new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()))&&void 0!==t?t:[]},[null==eV?void 0:eV.pages,ec,g]),e2=null!==(l=null==eL?void 0:eL.favorites)&&void 0!==l?l:0,e5=(0,v.useMemo)(()=>0===e4.length?[eK]:e$({contents:e4}),[e4]),e3=(0,v.useMemo)(()=>eJ(e5),[e5]),{data:e8,isLoading:e6,hasNextPage:e7,fetchNextPage:tt,isFetchingNextPage:ta,isSuccess:tn}=(0,eT.v)({projectRef:S,visibility:"project",sort:g},{enabled:Q,keepPreviousData:!0}),ts=(0,v.useMemo)(()=>{var e,t;let a=null!==(e=null==e8?void 0:e8.pages.flatMap(e=>{var t;return null!==(t=e.contents)&&void 0!==t?t:[]}))&&void 0!==e?e:[];return ec&&"project"===ec.visibility&&!a.find(e=>e.id===ec.id)&&a.push(ec),null!==(t=a.sort((e,t)=>"name"===g?e.name.localeCompare(t.name):new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()))&&void 0!==t?t:[]},[null==e8?void 0:e8.pages,ec,g]),tr=null!==(p=null==eL?void 0:eL.shared)&&void 0!==p?p:0,ti=(0,v.useMemo)(()=>0===ts.length?[eK]:e$({contents:ts}),[ts]),tl=(0,v.useMemo)(()=>eJ(ti),[ti]),to=[...null!==(m=null==eu?void 0:eu.pages.flatMap(e=>e.contents))&&void 0!==m?m:[],...null!==(f=null==e8?void 0:e8.pages.flatMap(e=>e.contents))&&void 0!==f?f:[]],{mutate:td,isLoading:tc}=(0,eo.R)({onError:e=>{y.Am.error("Failed to update query: ".concat(e.message))}}),{mutate:tu,isLoading:tp}=(0,ek.z)({onSuccess:e=>{if(P){let t=e.map(e=>(0,eb.s7)("sql",{id:e}));(0,eb.Pf)(S,t)}},onError:(e,t)=>{e.message.includes("Contents not found")?tx(t.ids):y.Am.error("Failed to delete query: ".concat(e.message))}}),{mutate:tm,isLoading:tf}=eZ({onSuccess:(e,t)=>{y.Am.success("Successfully deleted folder");let{ids:a}=t;q.removeFolder(a[0]),ed(void 0)}}),tx=e=>{R(!1),$([]);let t=Object.keys(q.snippets).filter(t=>!e.includes(t));0===t.length?b.push("/project/".concat(S,"/sql/new")):e.includes(w)&&b.push("/project/".concat(S,"/sql/").concat(t[0])),e.length>0&&e.forEach(e=>q.removeSnippet(e))},th=async e=>{var t;let a="share"===e?J:H;if(!S)return console.error("Project ref is required");if(!a)return console.error("Snippet ID is required");let n=q.snippets[a.id],s=null==n?void 0:null===(t=n.snippet)||void 0===t?void 0:t.content;if(void 0===s){let{content:e}=await (0,el.A)({projectRef:S,id:a.id});s=e}if(void 0===s)return y.Am.error("Unable to update snippet visibility: Content is missing");let r="share"===e?"project":"user";td({projectRef:S,payload:{...a,visibility:r,folder_id:null,content:s}},{onSuccess:()=>{Y(void 0),X(void 0),k({..._,shared:!0}),q.updateSnippet({id:a.id,snippet:{visibility:r,folder_id:null},skipSave:!0}),y.Am.success("share"===e?"Snippet is now shared to the project":"Snippet is now unshared from the project")}})},tv=async e=>{if(!C)return console.error("Profile is required");if(!M)return console.error("Project is required");if(!S)return console.error("Project ref is required");if(!w)return console.error("Snippet ID is required");let t="";if(e.content&&e.content.sql)t=e.content.sql;else{let{content:a}=await (0,el.A)({projectRef:S,id:e.id});"sql"in a&&(t=a.sql)}let a=(0,ee.wI)({id:(0,eO.Z)(),name:"".concat(e.name," (Duplicate)"),sql:t,owner_id:null==C?void 0:C.id,project_id:null==M?void 0:M.id});q.addSnippet({projectRef:S,snippet:a}),q.addNeedsSaving(a.id),b.push("/project/".concat(S,"/sql/").concat(a.id))},ty=async()=>{if(!S)return console.error("Project ref is required");if(void 0===ei)return console.error("No folder is selected");let e=eN.filter(e=>e.folder_id===ei.id);if(e.length>0){let t=e.map(e=>e.id);tu({projectRef:S,ids:t},{onSuccess:()=>{t.forEach(e=>q.removeSnippet(e)),tx(t),tm({projectRef:S,ids:[null==ei?void 0:ei.id]})}})}else tm({projectRef:S,ids:[null==ei?void 0:ei.id]})},tg=e=>{let t=eN.map(e=>e.id),a=t.indexOf(w),n=t.indexOf(e),s=Math.min(a,n),r=Math.max(a,n),i=[],l=eN[s].folder_id===eN[r].folder_id;for(let e=s;e<=r;e++)l&&eN[e].folder_id===eN[s].folder_id&&i.push(eN[e]);$(i)};return(0,v.useEffect)(()=>{void 0!==ec&&ep&&("project"===ec.visibility?k({..._,shared:!0}):"user"===ec.visibility&&k({..._,private:!0}),ec.folder_id&&!V.includes(ec.folder_id)&&G([...V,ec.folder_id]))},[ec,g,ep]),(0,v.useEffect)(()=>{$([])},[w]),(0,v.useEffect)(()=>{S&&eu&&eu.pages.forEach(e=>{var t,a;null===(t=e.contents)||void 0===t||t.forEach(e=>{q.addSnippet({projectRef:S,snippet:e})}),null===(a=e.folders)||void 0===a||a.forEach(e=>q.addFolder({projectRef:S,folder:e}))})},[S,null==eu?void 0:eu.pages]),(0,v.useEffect)(()=>{void 0!==S&&e1&&eV.pages.forEach(e=>{var t;null===(t=e.contents)||void 0===t||t.forEach(e=>{q.addSnippet({projectRef:S,snippet:e})})})},[S,null==eV?void 0:eV.pages]),(0,v.useEffect)(()=>{void 0!==S&&tn&&e8.pages.forEach(e=>{var t;null===(t=e.contents)||void 0===t||t.forEach(e=>{q.addSnippet({projectRef:S,snippet:e})})})},[S,null==e8?void 0:e8.pages]),(0,v.useEffect)(()=>{S&&ep&&tn&&P&&(0,e_.S)({ref:S,snippets:to})},[ep,tn,to]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(N.GZ,{className:"px-0",open:Q,onOpenChange:e=>{k({...null!=_?_:te,shared:e})},"data-sentry-element":"InnerSideMenuCollapsible","data-sentry-source-file":"SQLEditorNav.tsx",children:[(0,n.jsx)(N.Qn,{title:"Shared ".concat(tr>0?" (".concat(tr,")"):""),"data-sentry-element":"InnerSideMenuCollapsibleTrigger","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)(N.rt,{className:"group-data-[state=open]:pt-2","data-sentry-element":"InnerSideMenuCollapsibleContent","data-sentry-source-file":"SQLEditorNav.tsx",children:e6?(0,n.jsx)(eG,{}):0===tr?(0,n.jsx)(N.Cf,{className:"mx-2",title:"No shared queries",description:"Share queries with your team by right-clicking on the query."}):(0,n.jsx)(A.LQ,{data:ti,"aria-label":"project-level-snippets",nodeRenderer:e=>{var t,a;let{element:s,...r}=e,i=P&&Object.values(E.tabsMap).some(e=>{var t,a;return(null===(t=e.metadata)||void 0===t?void 0:t.sqlId)===(null===(a=s.metadata)||void 0===a?void 0:a.id)}),l=(0,eb.s7)("sql",{id:null==s?void 0:null===(t=s.metadata)||void 0===t?void 0:t.id}),o=P&&L.previewTabId===l,d=!o&&(null===(a=s.metadata)||void 0===a?void 0:a.id)===w;return(0,n.jsx)(e9,{...r,isOpened:i&&!o,isSelected:d,isPreview:o,onDoubleClick:e=>{e.preventDefault(),(0,eb.CW)(S,l)},element:s,onSelectDelete:()=>{R(!0),$([s.metadata])},onSelectRename:()=>{U(!0),en(s.metadata)},onSelectDownload:()=>{er(s.metadata)},onSelectDuplicate:()=>{tv(s.metadata)},onSelectUnshare:()=>{X(s.metadata)},isLastItem:tl.has(s.id),hasNextPage:e7,fetchNextPage:tt,isFetchingNextPage:ta})}})})]}),(0,n.jsx)(N.qs,{"data-sentry-element":"InnerSideMenuSeparator","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsxs)(N.GZ,{className:"px-0",open:D,onOpenChange:e=>{k({...null!=_?_:te,favorite:e})},"data-sentry-element":"InnerSideMenuCollapsible","data-sentry-source-file":"SQLEditorNav.tsx",children:[(0,n.jsx)(N.Qn,{title:"Favorites ".concat(e2>0?" (".concat(e2,")"):""),"data-sentry-element":"InnerSideMenuCollapsibleTrigger","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)(N.rt,{className:"group-data-[state=open]:pt-2","data-sentry-element":"InnerSideMenuCollapsibleContent","data-sentry-source-file":"SQLEditorNav.tsx",children:eY?(0,n.jsx)(eG,{}):0===e2?(0,n.jsx)(N.Cf,{title:"No favorite queries",className:"mx-2 px-3",description:(0,n.jsxs)(n.Fragment,{children:["Save a query to favorites for easy accessibility by clicking the"," ",(0,n.jsx)(eF.Z,{size:12,className:"inline-block relative align-center -top-[1px]"})," ","icon."]})}):(0,n.jsx)(A.LQ,{data:e5,"aria-label":"favorite-snippets",nodeRenderer:e=>{var t,a;let{element:s,...r}=e,i=P&&Object.values(E.tabsMap).some(e=>{var t,a;return(null===(t=e.metadata)||void 0===t?void 0:t.sqlId)===(null===(a=s.metadata)||void 0===a?void 0:a.id)}),l=(0,eb.s7)("sql",{id:null==s?void 0:null===(t=s.metadata)||void 0===t?void 0:t.id}),o=P&&L.previewTabId===l,d=!o&&(null===(a=s.metadata)||void 0===a?void 0:a.id)===w;return(0,n.jsx)(e9,{...r,isSelected:d,isOpened:i&&!o,isPreview:o,onDoubleClick:e=>{e.preventDefault(),(0,eb.CW)(S,l)},element:s,onSelectDelete:()=>{R(!0),$([s.metadata])},onSelectRename:()=>{U(!0),en(s.metadata)},onSelectDownload:()=>{er(s.metadata)},onSelectDuplicate:()=>{tv(s.metadata)},onSelectShare:()=>Y(s.metadata),onSelectUnshare:()=>{X(s.metadata)},isLastItem:e3.has(s.id),hasNextPage:eH,fetchNextPage:eX,isFetchingNextPage:e0})}})})]}),(0,n.jsx)(N.qs,{"data-sentry-element":"InnerSideMenuSeparator","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsxs)(N.GZ,{open:Z,onOpenChange:e=>{k({...null!=_?_:te,private:e})},className:"px-0","data-sentry-element":"InnerSideMenuCollapsible","data-sentry-source-file":"SQLEditorNav.tsx",children:[(0,n.jsx)(N.Qn,{title:"PRIVATE\n            ".concat(eQ>0?" (".concat(eQ,")"):""),"data-sentry-element":"InnerSideMenuCollapsibleTrigger","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)(N.rt,{className:"group-data-[state=open]:pt-2","data-sentry-element":"InnerSideMenuCollapsibleContent","data-sentry-source-file":"SQLEditorNav.tsx",children:em?(0,n.jsx)(eP.Z,{}):0===eC.length&&0===eQ?(0,n.jsx)(eE,{}):(0,n.jsx)(A.LQ,{multiSelect:!0,togglableSelect:!0,clickAction:"EXCLUSIVE_SELECT",data:eD,selectedIds:K.map(e=>e.id),"aria-label":"private-snippets",onExpand:e=>{let t=e.element.id.toString();e.isExpanded&&!V.includes(t)&&G([...V,t]),!e.isExpanded&&V.includes(t)&&G(V.filter(e=>e!==t))},expandedIds:V,nodeRenderer:e=>{var t,a;let{element:s,...r}=e,i=P&&Object.values(E.tabsMap).some(e=>{var t,a;return(null===(t=e.metadata)||void 0===t?void 0:t.sqlId)===(null===(a=s.metadata)||void 0===a?void 0:a.id)}),l=(0,eb.s7)("sql",{id:null==s?void 0:null===(t=s.metadata)||void 0===t?void 0:t.id}),o=P&&L.previewTabId===l,d=!o&&(null===(a=s.metadata)||void 0===a?void 0:a.id)===w;return(0,n.jsx)(e9,{...r,element:s,isOpened:i&&!o,isSelected:d,isPreview:o,isMultiSelected:K.length>1,isLastItem:eI.has(s.id),status:r.isBranch?q.folders[s.id].status:"idle",onMultiSelect:tg,onSelectCreate:()=>{if(C&&M){let e=(0,ee.wI)({id:(0,eO.Z)(),name:eq.$C,owner_id:null==C?void 0:C.id,project_id:null==M?void 0:M.id,folder_id:s.id,sql:""});q.addSnippet({projectRef:M.ref,snippet:e}),b.push("/project/".concat(S,"/sql/").concat(e.id))}},onSelectDelete:()=>{r.isBranch?ed(s.metadata):(R(!0),0===K.length&&$([s.metadata]))},onSelectRename:()=>{r.isBranch?q.editFolder(s.id):(U(!0),en(s.metadata))},onSelectMove:()=>{O(!0),0===K.length&&$([s.metadata])},onSelectDownload:()=>er(s.metadata),onSelectDuplicate:()=>tv(s.metadata),onSelectShare:()=>Y(s.metadata),onEditSave:e=>{0===e.length&&"new-folder"===s.id?q.removeFolder(s.id):e.length>0&&q.saveFolder({id:s.id,name:e})},hasNextPage:eh,fetchNextPage:ey,isFetchingNextPage:eg,sort:g,onFolderContentsChange:e=>{let{isLoading:t,snippets:a}=e;eS(e=>({...e,[s.id]:{snippets:a,isLoading:t}}))},onDoubleClick:e=>{e.preventDefault(),(0,eb.CW)(S,l)}})}})})]}),(0,n.jsx)(eB.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)(eM,{snippet:ea,visible:B,onCancel:()=>U(!1),onComplete:()=>U(!1),"data-sentry-element":"RenameQueryModal","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)(ev,{snippets:K,visible:T,onClose:()=>{O(!1),$([])},"data-sentry-element":"MoveQueryModal","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)(et,{id:null!==(x=null==es?void 0:es.id)&&void 0!==x?x:"",visible:void 0!==es,onCancel:()=>er(void 0),"data-sentry-element":"DownloadSnippetModal","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)(eU.Z,{size:"medium",loading:tc,title:"Confirm to share query: ".concat(null==J?void 0:J.name),confirmLabel:"Share query",confirmLabelLoading:"Sharing query",visible:void 0!==J,onCancel:()=>Y(void 0),onConfirm:()=>th("share"),alert:{title:"This SQL query will become public to all team members",description:"Anyone with access to the project can view it"},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,n.jsxs)("ul",{className:"text-sm text-foreground-light space-y-5",children:[(0,n.jsxs)("li",{className:"flex gap-3 items-center",children:[(0,n.jsx)(ez.Z,{size:16,"data-sentry-element":"Eye","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)("span",{children:"Project members will have read-only access to this query."})]}),(0,n.jsxs)("li",{className:"flex gap-3 items-center",children:[(0,n.jsx)(eA.Z,{size:16,"data-sentry-element":"Unlock","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)("span",{children:"Anyone will be able to duplicate it to their personal snippets."})]})]})}),(0,n.jsx)(eU.Z,{size:"medium",title:"Confirm to unshare query: ".concat(null==H?void 0:H.name),confirmLabel:"Unshare query",confirmLabelLoading:"Unsharing query",visible:void 0!==H,onCancel:()=>X(void 0),onConfirm:()=>th("unshare"),alert:{title:"This SQL query will no longer be public to all team members",description:"Only you will have access to this query"},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,n.jsx)("ul",{className:"text-sm text-foreground-light space-y-5",children:(0,n.jsxs)("li",{className:"flex gap-3",children:[(0,n.jsx)(eR.Z,{"data-sentry-element":"EyeOffIcon","data-sentry-source-file":"SQLEditorNav.tsx"}),(0,n.jsx)("span",{children:"Project members will no longer be able to view this query."})]})})}),(0,n.jsx)(eU.Z,{size:"small",title:"Confirm to delete ".concat(1===K.length?"query":"".concat(K.length.toLocaleString()," quer").concat(K.length>1?"ies":"y")),confirmLabel:"Delete ".concat(K.length.toLocaleString()," quer").concat(K.length>1?"ies":"y"),confirmLabelLoading:"Deleting query",loading:tp,visible:z,variant:"destructive",onCancel:()=>{R(!1),$([])},onConfirm:()=>{if(!S)return console.error("Project ref is required");tu({projectRef:S,ids:K.map(e=>e.id)},{onSuccess:e=>{y.Am.success("Successfully deleted ".concat(K.length.toLocaleString()," quer").concat(K.length>1?"ies":"y")),tx(e)}})},alert:(null===(a=K[0])||void 0===a?void 0:a.visibility)==="project"?{title:"This SQL snippet will be lost forever",description:"Deleting this query will remove it for all members of the project team."}:void 0,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,n.jsxs)("p",{className:"text-sm",children:["This action cannot be undone."," ",1===K.length?"Are you sure you want to delete '".concat(null===(s=K[0])||void 0===s?void 0:s.name,"'?"):"Are you sure you want to delete the selected ".concat(K.length," quer").concat(K.length>1?"ies":"y","?")]})}),(0,n.jsx)(eU.Z,{size:"small",title:"Confirm to delete folder",confirmLabel:"Delete folder",confirmLabelLoading:"Deleting folder",loading:tf,visible:void 0!==ei,variant:"destructive",onCancel:()=>ed(void 0),onConfirm:ty,alert:{title:"This action cannot be undone",description:"All SQL snippets within the folder will be permanently removed, and cannot be recovered."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SQLEditorNav.tsx",children:(0,n.jsxs)("p",{className:"text-sm",children:["Are you sure you want to delete the folder '",null==ei?void 0:ei.name,"'?"]})})]})},ta=()=>{let e=(0,h.useRouter)(),{profile:t}=(0,u.Un)(),a=(0,d.Vm)(),{ref:C}=(0,i.UO)(),q=(0,j.B0)(),[L,E]=(0,v.useState)(""),[P,_]=(0,v.useState)(!1),[k,Q]=(0,o._)(c.dA.SQL_EDITOR_SORT(null!=C?C:""),"inserted_at"),D=(0,g.Mb)(),I=(0,r.Nr)(L,500),Z=(0,l.Xo)(s.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==t?void 0:t.id},subject:{id:null==t?void 0:t.id}}),T=()=>{if(!C)return console.error("Project ref is required");E(""),_(!1),q.addNewFolder({projectRef:C})},O=async()=>{if(!C)return console.error("Project ref is required");if(!a)return console.error("Project is required");if(!t)return console.error("Profile is required");if(!Z)return(0,y.Am)("Your queries will not be saved as you do not have sufficient permissions");try{e.push("/project/".concat(C,"/sql/new?skip=true")),E(""),_(!1)}catch(e){y.Am.error("Failed to create new query: ".concat(e.message))}};return(0,v.useEffect)(()=>{_(I.length>0)},[I]),(0,n.jsxs)("div",{className:"h-full flex flex-col justify-between","data-sentry-component":"SQLEditorMenu","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 flex-grow",children:[(0,n.jsxs)("div",{className:"mt-4 mx-4 flex items-center justify-between gap-x-2",children:[(0,n.jsx)(N.nM,{className:"w-full p-0 gap-0","data-sentry-element":"InnerSideBarFilters","data-sentry-source-file":"SQLEditorMenu.tsx",children:(0,n.jsx)(N.nn,{name:"search-queries",placeholder:"Search queries...","aria-labelledby":"Search queries",value:L,onChange:e=>{let t=e.target.value;E(t),0===t.length&&_(!1)},onKeyDown:e=>{"Escape"===e.code&&(E(""),_(!1))},"data-sentry-element":"InnerSideBarFilterSearchInput","data-sentry-source-file":"SQLEditorMenu.tsx",children:P?(0,n.jsxs)(b.u,{children:[(0,n.jsx)(b.aJ,{className:"absolute right-1 top-[.4rem] md:top-[.3rem] transition-colors text-foreground-light hover:text-foreground",onClick:()=>{E(""),_(!1)},children:(0,n.jsx)(p.Z,{size:18})}),(0,n.jsx)(b._v,{children:"Clear search"})]}):(0,n.jsxs)(N.ZY,{value:k,onValueChange:e=>Q(e),children:[(0,n.jsx)(N.IR,{value:"name",children:"Alphabetical"},"name"),(0,n.jsx)(N.IR,{value:"inserted_at",children:"Created At"},"inserted_at")]})})}),(0,n.jsxs)(S.h_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,n.jsx)(S.$F,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"SQLEditorMenu.tsx",children:(0,n.jsx)(w.z,{type:"default",icon:(0,n.jsx)(m.Z,{className:"text-foreground"}),className:"w-[26px]","data-sentry-element":"Button","data-sentry-source-file":"SQLEditorMenu.tsx"})}),(0,n.jsxs)(S.AW,{align:"end",side:"bottom",className:"w-48","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,n.jsxs)(S.Xi,{className:"gap-x-2",onClick:()=>O(),"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,n.jsx)(f.Z,{size:14,"data-sentry-element":"FilePlus","data-sentry-source-file":"SQLEditorMenu.tsx"}),"Create a new snippet"]}),(0,n.jsxs)(S.Xi,{className:"gap-x-2",onClick:()=>T(),"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"SQLEditorMenu.tsx",children:[(0,n.jsx)(x.Z,{size:14,"data-sentry-element":"FolderPlus","data-sentry-source-file":"SQLEditorMenu.tsx"}),"Create a new folder"]})]})]})]}),P?(0,n.jsx)(B,{search:I}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M,{}),(0,n.jsx)(tt,{sort:k})]})]}),(0,n.jsx)("div",{className:"p-4 border-t sticky bottom-0 bg-studio",children:(0,n.jsx)(w.z,{block:!0,type:"default",onClick:()=>D.setOnGoingQueriesPanelOpen(!0),"data-sentry-element":"Button","data-sentry-source-file":"SQLEditorMenu.tsx",children:"View running queries"})})]})}},12717:function(e,t,a){var n=a(97458),s=a(52983),r=a(17634);let i=(0,s.memo)(function(){return(0,n.jsx)("div",{className:"px-4 flex flex-col gap-0",children:[{width:"w-40",opacity:"opacity-100"},{width:"w-32",opacity:"opacity-100"},{width:"w-20",opacity:"opacity-75"},{width:"w-40",opacity:"opacity-50"},{width:"w-20",opacity:"opacity-25"}].map((e,t)=>(0,n.jsxs)("div",{className:"flex flex-row h-6 items-center gap-3 ".concat(e.opacity),children:[(0,n.jsx)(r.O,{className:"h-4 w-5"}),(0,n.jsx)(r.O,{className:"h-4 ".concat(e.width)})]},t))})});t.Z=i},21109:function(e,t,a){a.d(t,{t:function(){return _}});var n=a(97458),s=a(72370),r=a(54580),i=a(87076),l=a(53355),o=a(67236),d=a(33480),c=a(1774),u=a(10829),p=a(16402),m=a(59171),f=a(99740),x=a(19714),h=a(82943),v=a(52983),y=a(34653),g=a(90791),j=a(34596),b=a(7823),S=a(84795),w=a(91252),N=a(81510),C=a(44499),M=a(54888);function q(e){let{hideTabs:t}=e,{showSidebar:a,setShowSidebar:s}=(0,j.WZ)();return(0,n.jsxs)(M.u,{"data-sentry-element":"Tooltip","data-sentry-component":"CollapseButton","data-sentry-source-file":"CollapseButton.tsx",children:[(0,n.jsx)(M.aJ,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"CollapseButton.tsx",children:(0,n.jsx)("button",{className:(0,l.cn)("flex items-center justify-center w-10 h-10 hover:bg-surface-100 shrink-0",!t&&"border-b border-b-default"),onClick:()=>s(!a),children:a?(0,n.jsx)(N.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"}):(0,n.jsx)(C.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"})})}),(0,n.jsxs)(M._v,{side:"bottom","data-sentry-element":"TooltipContent","data-sentry-source-file":"CollapseButton.tsx",children:["Collapse"," sidebar"]})]})}let L=e=>{var t;let{tab:a,index:s,openTabs:i,onClose:o}=e,d=(0,h.useRouter)(),{ref:x}=(0,r.UO)(),y=d.query.schema||"public",{attributes:j,listeners:w,setNodeRef:N,transform:C,transition:M,isDragging:q}=(0,c.nB)({id:a.id}),L={transform:u.ux.Transform.toString(C),transition:M,zIndex:q?1:0},E=(0,v.useMemo)(()=>"r"===a.type&&i.filter(e=>"r"===e.type).some(e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.schema)!==y}),[i,y,a.type]);return(0,n.jsxs)(p.E.div,{ref:N,style:L,...j,layoutId:a.id,transition:{duration:.045},animate:{opacity:q?0:1},className:(0,l.cn)("flex items-center h-10 first-of-type:border-l"),"data-sentry-element":"unknown","data-sentry-component":"SortableTab","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsxs)(S.SP,{value:a.id,onDoubleClick:()=>(0,b.CW)(x,a.id),className:(0,l.cn)("flex items-center gap-2 px-3 text-xs","bg-dash-sidebar/50 dark:bg-surface-100/50","data-[state=active]:bg-dash-sidebar dark:data-[state=active]:bg-surface-100","border-b border-default","data-[state=active]:border-b-background-dash-sidebar dark:data-[state=active]:border-b-background-surface-100","relative group h-full","hover:bg-surface-300 dark:hover:bg-surface-100",a.isPreview&&"italic font-light"),...w,"data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsx)(g.F,{type:a.type,"data-sentry-element":"EntityTypeIcon","data-sentry-source-file":"Tabs.tsx"}),(0,n.jsxs)("div",{className:"flex items-center gap-0",children:[(0,n.jsx)(m.M,{mode:"popLayout",initial:!0,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"Tabs.tsx",children:E&&(0,n.jsxs)(p.E.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.15},className:"text-foreground-muted group-data-[state=active]:text-foreground-lighter",children:[null==a?void 0:null===(t=a.metadata)||void 0===t?void 0:t.schema,"."]})}),(0,n.jsx)("span",{children:a.label||"Untitled"})]}),(0,n.jsx)("span",{role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"ml-1 opacity-0 group-hover:opacity-100 hover:bg-200 rounded-sm cursor-pointer",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onPointerDown:e=>{e.preventDefault(),e.stopPropagation(),o(a.id)},children:(0,n.jsx)(f.Z,{size:12,className:"text-foreground-light","data-sentry-element":"X","data-sentry-source-file":"Tabs.tsx"})}),(0,n.jsx)("div",{className:"absolute w-full top-0 left-0 right-0 h-px bg-foreground opacity-0 group-data-[state=active]:opacity-100"})]}),s<i.length&&(0,n.jsx)("div",{role:"separator",className:"h-full w-px bg-border"},"separator-".concat(a.id))]})},E=e=>{let{tab:t}=e,{ref:a}=(0,r.UO)(),s=(0,b.yj)(a),i=(0,y.R)(s).tabsMap[t];return i?(0,n.jsxs)(p.E.div,{layoutId:t,transition:{duration:.045},animate:{opacity:.7},className:"flex relative items-center gap-2 px-3 text-xs bg-dash-sidebar dark:bg-surface-100 shadow-lg rounded-sm h-10","data-sentry-element":"unknown","data-sentry-component":"TabPreview","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsx)(g.F,{type:i.type,"data-sentry-element":"EntityTypeIcon","data-sentry-source-file":"Tabs.tsx"}),(0,n.jsx)("span",{children:i.label||"Untitled"}),(0,n.jsx)("div",{className:"absolute w-full top-0 left-0 right-0 h-px bg-foreground-muted"})]}):null};function P(){var e;let{ref:t}=(0,r.UO)(),a=(0,h.useRouter)(),s=(0,j.WZ)(),i=(0,w.f)(),o=(0,b.yj)(t),u=(0,y.R)(o),v=(0,d.Dy)((0,d.VT)(d.we,{activationConstraint:{distance:1}})),g=u.openTabs.map(e=>u.tabsMap[e]).filter(e=>void 0!==e),N=a.asPath.includes("/new"),C=i?g.filter(e=>{var t;return null===(t=b.zP[i])||void 0===t?void 0:t.includes(e.type)}):[],M=e=>{(0,b.tL)({ref:t,id:e,router:a,editor:i,onClearDashboardHistory:()=>{t&&i&&s.setDashboardHistory(t,"table"===i?"editor":i,void 0)}})};return(0,n.jsxs)(d.LB,{sensors:v,onDragEnd:e=>{let{active:n,over:s}=e;if(!s||n.id===s.id)return;let r=u.openTabs.indexOf(n.id.toString()),i=u.openTabs.indexOf(s.id.toString());r!==i&&(0,b.HH)(t,r,i,n.id.toString(),a)},"data-sentry-element":"DndContext","data-sentry-component":"Tabs","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsxs)(S.mQ,{className:"w-full flex",value:N?"new":null!==(e=u.activeTab)&&void 0!==e?e:void 0,onValueChange:e=>{(0,b.nk)(t,e,a)},"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsx)(q,{hideTabs:!1,"data-sentry-element":"CollapseButton","data-sentry-source-file":"Tabs.tsx"}),(0,n.jsxs)(S.dr,{className:"bg-surface-200 dark:bg-alternative rounded-b-none gap-0 h-10 flex items-center w-full z-[1] border-none overflow-clip overflow-x-auto ","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsx)(c.Fo,{items:C.map(e=>e.id),strategy:c.PG,"data-sentry-element":"SortableContext","data-sentry-source-file":"Tabs.tsx",children:C.map((e,t)=>(0,n.jsx)(L,{tab:e,index:t,openTabs:g,onClose:()=>M(e.id)},e.id))}),N&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(S.SP,{value:"new",className:(0,l.cn)("flex items-center gap-2 px-3 text-xs","bg-dash-sidebar/50 dark:bg-surface-100/50","data-[state=active]:bg-dash-sidebar dark:data-[state=active]:bg-surface-100","relative group h-full border-t-2 !border-b-0","hover:bg-surface-300 dark:hover:bg-surface-100"),children:[(0,n.jsx)(x.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter"}),(0,n.jsx)("div",{className:"flex items-center gap-0",children:(0,n.jsx)("span",{children:"New"})}),(0,n.jsx)("span",{role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"ml-1 opacity-0 group-hover:opacity-100 hover:bg-200 rounded-sm cursor-pointer",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onPointerDown:e=>{e.preventDefault(),e.stopPropagation(),M("new")},children:(0,n.jsx)(f.Z,{size:12,className:"text-foreground-light"})})," ",(0,n.jsx)("div",{className:"absolute w-full -bottom-[1px] left-0 right-0 h-px bg-dash-sidebar dark:bg-surface-100 opacity-0 group-data-[state=active]:opacity-100"})]})}),(0,n.jsx)(m.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"Tabs.tsx",children:!N&&(0,n.jsx)(p.E.button,{className:"flex items-center justify-center w-10 h-10 hover:bg-surface-100 shrink-0 border-b",onClick:()=>a.push("/project/".concat(a.query.ref,"/").concat("table"===i?"editor":"sql","/new?skip=true")),initial:{opacity:0,scale:.8,x:-10},animate:{opacity:1,scale:1,x:0},transition:{duration:.2},children:(0,n.jsx)(x.Z,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"})})}),(0,n.jsx)("div",{className:"grow h-full border-b pr-6"})]})]}),(0,n.jsx)(d.y9,{dropAnimation:null,"data-sentry-element":"DragOverlay","data-sentry-source-file":"Tabs.tsx",children:u.activeTab?(0,n.jsx)(E,{tab:u.activeTab}):null})]})}let _=e=>{let{children:t,title:a,product:d,...c}=e,{ref:u}=(0,r.UO)(),p=(0,s.usePathname)(),m=(0,w.f)(),f=(0,i.B7)(),x=(0,i.Ff)(),h=p==="/project/".concat(u,"/editor")||p==="/project/".concat(u,"/sql");return(0,n.jsx)(o.$,{resizableSidebar:!0,title:a,product:d,...c,"data-sentry-element":"ProjectLayoutWithAuth","data-sentry-component":"EditorBaseLayout","data-sentry-source-file":"EditorBaseLayout.tsx",children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:["table"===m&&f||"sql"===m&&x?(0,n.jsxs)("div",{className:(0,l.cn)("h-10 flex items-center",h?"bg-surface-100":"bg-surface-200 dark:bg-alternative"),children:[h&&(0,n.jsx)(q,{hideTabs:h}),!h&&(0,n.jsx)(P,{})]}):null,(0,n.jsx)("div",{className:"h-full",children:t})]})})}},90791:function(e,t,a){a.d(t,{F:function(){return c}});var n=a(97458),s=a(21599),r=a(77768),i=a(9029),l=a(4752),o=a(76430),d=a(53355);let c=e=>{var t,a,c;let{type:u,size:p=15,strokeWidth:m=1.5,isActive:f}=e;return"sql"===u?(0,n.jsx)(o.KK,{size:p,className:(0,d.cn)("transition-colors","fill-foreground-muted","group-aria-selected:fill-foreground","w-4 h-4","-ml-0.5"),strokeWidth:m}):u===s.l.TABLE?(0,n.jsx)(r.Z,{size:p,strokeWidth:m,className:(0,d.cn)("text-foreground-muted group-hover:text-foreground-lighter group-aria-selected:text-foreground",f&&"text-foreground-light","transition-colors")}):"schema"===u?(0,n.jsx)(i.Z,{size:p,strokeWidth:m}):u===s.l.VIEW?(0,n.jsx)(l.Z,{size:p,strokeWidth:m,className:(0,d.cn)("text-foreground-muted group-hover:text-foreground-lighter",f&&"text-foreground-lighter","transition-colors")}):(0,n.jsx)("div",{className:(0,d.cn)("flex items-center justify-center text-xs h-4 w-4 rounded-[2px] font-bold",u===s.l.FOREIGN_TABLE&&"text-yellow-900 bg-yellow-500",u===s.l.MATERIALIZED_VIEW&&"text-purple-1000 bg-purple-500",u===s.l.PARTITIONED_TABLE&&"text-foreground-light bg-border-stronger"),"data-sentry-component":"EntityTypeIcon","data-sentry-source-file":"EntityTypeIcon.tsx",children:null===(c=Object.entries(s.l).find(e=>{let[,t]=e;return t===u}))||void 0===c?void 0:null===(a=c[0])||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.toUpperCase()})}},34024:function(e,t,a){var n=a(97458),s=a(77317),r=a(52983),i=a(99952);let l=e=>{var t,a,l;let{defaultActiveId:o,activeId:d,type:c="pills",size:u="tiny",block:p,onChange:m,onClick:f,scrollable:x,wrappable:h,addOnBefore:v,addOnAfter:y,listClassNames:g,baseClassNames:j,refs:b,children:S}=e,w=r.Children.toArray(S),[N,C]=(0,r.useState)(null!==(l=null!=d?d:o)&&void 0!==l?l:null==w?void 0:null===(a=w[0])||void 0===a?void 0:null===(t=a.props)||void 0===t?void 0:t.id);(0,r.useMemo)(()=>{d&&d!==N&&C(d)},[d]);let M=(0,i.Z)("tabs");function q(e){null==f||f(e),e!==N&&(null==m||m(e),C(e))}let L=[M[c].list];return x&&L.push(M.scrollable),h&&L.push(M.wrappable),g&&L.push(g),(0,n.jsxs)(s.fC,{value:N,className:[M.base,j].join(" "),ref:null==b?void 0:b.base,"data-sentry-element":"unknown","data-sentry-component":"Tabs","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsxs)(s.aV,{className:L.join(" "),ref:null==b?void 0:b.list,"data-sentry-element":"unknown","data-sentry-source-file":"Tabs.tsx",children:[v,w.map(e=>{let t=N===e.props.id,a=[M[c].base,M.size[u]];return t?a.push(M[c].active):a.push(M[c].inactive),p&&a.push(M.block),(0,n.jsxs)(s.xz,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),q(e.props.id))},onClick:()=>q(e.props.id),value:e.props.id,className:a.join(" "),children:[e.props.icon,(0,n.jsx)("span",{children:e.props.label}),e.props.iconRight]},"".concat(e.props.id,"-tab-button"))}),y]}),w]})};l.Panel=e=>{let{children:t,id:a,className:r}=e,l=(0,i.Z)("tabs");return(0,n.jsx)(s.VY,{value:a,className:[l.content,r].join(" "),"data-sentry-element":"unknown","data-sentry-component":"Panel","data-sentry-source-file":"Tabs.tsx",children:t})},t.Z=l}}]);