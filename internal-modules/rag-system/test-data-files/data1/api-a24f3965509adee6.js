!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="38b3893f-262a-4a3c-9462-9b035d0ff34b",e._sentryDebugIdIdentifier="sentry-dbid-38b3893f-262a-4a3c-9462-9b035d0ff34b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2469],{17318:function(e,t,a){var s=a(94365),n=a(96843),r=Math.max;e.exports=function(e,t,a){var l=null==e?0:e.length;if(!l)return -1;var i=null==a?0:n(a);return i<0&&(i=r(l+i,0)),s(e,t,i)}},58656:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/api",function(){return a(3897)}])},66344:function(e,t,a){"use strict";a.d(t,{Q:function(){return i}});var s=a(97458),n=a(59630),r=a(35772),l=a(94821),i=e=>{let{page:t,menu:a}=e;return(0,s.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,s.jsx)(n.ZP,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:a.map((e,i)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"my-6 space-y-8",children:(0,s.jsxs)("div",{className:"mx-3",children:[(0,s.jsx)(n.ZP.Group,{title:e.title?(0,s.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,s.jsx)("span",{children:e.title}),e.isPreview&&(0,s.jsx)(r.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,s.jsx)("div",{children:e.items.map(e=>{let a=e.pages?e.pages.includes(t):t===e.key;return(0,s.jsx)(l.Z,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:a,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==a.length-1&&(0,s.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},80263:function(e,t,a){"use strict";a.d(t,{$E:function(){return c},h8:function(){return o},kM:function(){return d}});var s=a(28894),n=a(36457),r=a(64472),l=a(52983),i=a(23801);async function o(e,t){let{projectRef:a}=e;if(!a)throw Error("projectRef is required");let{data:s,error:n}=await (0,r.U2)("/platform/auth/{ref}/config",{params:{path:{ref:a}},signal:t});return n&&(0,r.S3)(n),s}let c=function(e){let{projectRef:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.a)(i.o.authConfig(t),e=>{let{signal:a}=e;return o({projectRef:t},a)},{enabled:a&&void 0!==t,...n})},d=e=>{let{projectRef:t}=e,a=(0,n.NL)();return(0,l.useCallback)(()=>{t&&a.prefetchQuery(i.o.authConfig(t),e=>{let{signal:a}=e;return o({projectRef:t},a)})},[a,t])}},99901:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var s=a(36457),n=a(64618),r=a(34549),l=a(64472),i=a(23801);async function o(e){let{projectRef:t,config:a}=e,{data:s,error:n}=await (0,l.r$)("/platform/auth/{ref}/config",{params:{path:{ref:t}},body:{...a}});return n&&(0,l.S3)(n),s}let c=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,s.NL)();return(0,n.D)(e=>o(e),{async onSuccess(t,a,s){let{projectRef:n}=a;await l.invalidateQueries(i.o.authConfig(n)),await (null==e?void 0:e(t,a,s))},async onError(e,a,s){void 0===t?r.Am.error("Failed to update auth configuration: ".concat(e.message)):t(e,a,s)},...a})}},4703:function(e,t,a){"use strict";a.d(t,{X:function(){return c}});var s=a(36457),n=a(64618),r=a(34549),l=a(64472),i=a(94220);async function o(e){let{projectRef:t,dbSchema:a,maxRows:s,dbExtraSearchPath:n,dbPool:r}=e,i={db_schema:a,max_rows:s,db_extra_search_path:n};r&&(i.db_pool=r);let{data:o,error:c}=await (0,l.r$)("/platform/projects/{ref}/config/postgrest",{params:{path:{ref:t}},body:i});return c&&(0,l.S3)(c),o}let c=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,s.NL)();return(0,n.D)(e=>o(e),{async onSuccess(t,a,s){let{projectRef:n}=a;l.invalidateQueries(i.U.postgrest(n)),await (null==e?void 0:e(t,a,s))},async onError(e,a,s){void 0===t?r.Am.error("Failed to update Postgrest config: ".concat(e.message)):t(e,a,s)},...a})}},85771:function(e,t,a){"use strict";a.d(t,{H:function(){return c}});var s=a(28894),n=a(64472),r=a(72794),l=a(14612),i=a(73614);async function o(e,t){let{projectRef:a,connectionString:s}=e;if(!a)throw Error("projectRef is required");let r=new Headers;s&&r.set("x-connection-encrypted",s);let{data:l,error:i}=await (0,n.U2)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":s},path:{ref:a}},headers:r,signal:t});return i&&(0,n.S3)(i),l}let c=function(e){let{projectRef:t,connectionString:a}=e,{enabled:n=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,l.Vm)(),u=(null==d?void 0:d.status)===i.S.ACTIVE_HEALTHY;return(0,s.a)(r.o.list(t),e=>{let{signal:s}=e;return o({projectRef:t,connectionString:a},s)},{enabled:n&&void 0!==t&&u,...c})}},34438:function(e,t,a){"use strict";a.d(t,{j:function(){return o}});var s=a(28894),n=a(64472),r=a(73614),l=a(4473);async function i(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:s,error:r}=await (0,n.U2)("/platform/projects/{ref}/load-balancers",{params:{path:{ref:a}},signal:t});return r&&(0,n.S3)(r),s}let o=function(e){let{projectRef:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.a)(l.Z.loadBalancers(t),e=>{let{signal:a}=e;return i({projectRef:t},a)},{enabled:a&&void 0!==t&&r.Qy,...n})}},83427:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(88122).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},56816:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(88122).Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},59113:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(88122).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},26713:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var s=a(97458),n=a(82943),r=a(52983),l=a(54580),i=a(66344),o=a(26950),c=a(7611),d=a(14612),u=a(87358),m=a(55861),x=a(73614),f=a(67236),h=a(83427);let p=(e,t,a,n)=>{var r,l,i,o;let c=(null==t?void 0:t.status)===x.S.COMING_UP,d="/project/".concat(e),u=null===(r=null==n?void 0:n.auth)||void 0===r||r,m=null===(l=null==n?void 0:n.edgeFunctions)||void 0===l||l,f=null===(i=null==n?void 0:n.storage)||void 0===i||i,p=null!==(o=null==n?void 0:n.diskAndCompute)&&void 0!==o&&o;return[{title:"Project Settings",items:[{name:"General",key:"general",url:"/project/".concat(e,"/settings/general"),items:[]},...x.Qy&&p?[{name:"Compute and Disk",key:"compute-and-disk",url:"/project/".concat(e,"/settings/compute-and-disk"),items:[]}]:[],{name:"Infrastructure",key:"infrastructure",url:c?d:"/project/".concat(e,"/settings/infrastructure"),items:[]},...x.Qy?[{name:"Integrations",key:"integrations",url:"/project/".concat(e,"/settings/integrations"),items:[]},...(null==n?void 0:n.newApiKeys)?[{name:"API Keys",key:"api-keys",url:"/project/".concat(e,"/settings/api-keys"),items:[],label:"NEW"}]:[]]:[],{name:"Add Ons",key:"addons",url:"/project/".concat(e,"/settings/addons"),items:[]},{name:"Vault",key:"vault",url:c?d:"/project/".concat(e,"/integrations/vault/overview"),items:[],rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"}),label:"Alpha"}]},{title:"Configuration",items:[{name:"Database",key:"database",url:c?d:"/project/".concat(e,"/settings/database"),items:[]},{name:"Data API",key:"api",url:c?d:"/project/".concat(e,"/settings/api"),items:[]},...x.Qy&&u?[{name:"Authentication",key:"auth",url:c?d:"/project/".concat(e,"/settings/auth"),items:[]}]:[],...x.Qy&&f?[{name:"Storage",key:"storage",url:"/project/".concat(e,"/settings/storage"),items:[]}]:[],...x.Qy&&m?[{name:"Edge Functions",key:"functions",url:"/project/".concat(e,"/functions/secrets"),items:[],rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"})}]:[],...x.Qy?[{name:"Log Drains",key:"log-drains",url:"/project/".concat(e,"/settings/log-drains"),items:[]}]:[]]},{title:"Billing",items:[{name:"Subscription",key:"subscription",url:"/org/".concat(null==a?void 0:a.slug,"/billing"),items:[]},{name:"Usage",key:"usage",url:"/org/".concat(null==a?void 0:a.slug,"/usage?projectRef=").concat(e),items:[]}]}]};var g=(0,u.Q)(e=>{let{title:t,children:a}=e,u=(0,n.useRouter)(),{ref:h}=(0,l.UO)(),g=(0,d.Vm)(),y=(0,c.l)();(0,r.useEffect)(()=>{x.Qy||u.push("/project/default")},[u]);let b=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:j,projectEdgeFunctionAll:v,projectStorageAll:w,billingInvoices:N}=(0,o.N)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),S=p(h,g,y,{auth:j,edgeFunctions:v,storage:w,invoices:N,diskAndCompute:(0,m.P)("diskAndComputeForm"),newApiKeys:(0,m.P)("newApiKeys")});return(0,s.jsx)(f.Z,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,s.jsx)(i.Q,{page:b,menu:S}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:a})})},97847:function(e,t,a){"use strict";a.d(t,{CG:function(){return w},FW:function(){return m},I7:function(){return f},Lc:function(){return y},RN:function(){return p},Wv:function(){return j},_S:function(){return c},g$:function(){return g},gW:function(){return N},jX:function(){return x},q7:function(){return u},qw:function(){return h},s_:function(){return o},tM:function(){return b},tU:function(){return d},ur:function(){return v},y:function(){return i}});var s=a(97458),n=a(52983),r=a(21513),l=a(53355);let i="mx-auto w-full max-w-[1200px]",o="px-4 md:px-6 lg:px-14 xl:px-24 2xl:px-28",c=(0,n.forwardRef)((e,t)=>{let{className:a,bottomPadding:n,size:i="default",...c}=e,d=(0,r.oJ)();return(0,s.jsx)("div",{ref:t,...c,className:(0,l.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[i],o,n&&"pb-16",d.open?"xl:px-6":"",a)})}),d=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("header",{...n,ref:t,className:(0,l.cn)("w-full","flex-col gap-3 py-6",a)})}),u=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h1",{ref:t,...n,className:(0,l.cn)("text-2xl",a)})}),m=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("p",{ref:t,...n,className:(0,l.cn)("text-sm text-foreground-light",a)})}),x=(0,n.forwardRef)((e,t)=>{let{className:a,isFullWidth:n,topPadding:r,...i}=e;return(0,s.jsx)("div",{ref:t,...i,className:(0,l.cn)("flex flex-col first:pt-12 py-6",n?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),f=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,l.cn)("w-full h-px bg-border",a)})}),h=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h3",{ref:t,...n,className:(0,l.cn)("text-foreground text-xl",a)})}),p=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("p",{ref:t,...n,className:(0,l.cn)("text-sm text-foreground-light",a)})}),g=(0,n.forwardRef)((e,t)=>{let{className:a,children:n,title:r,...i}=e;return(0,s.jsxs)("div",{ref:t,...i,className:(0,l.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[r&&(0,s.jsx)("h2",{children:r}),n]})}),y=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,l.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),b=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,l.cn)("flex flex-col gap-3 items-center",a)})}),j=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,l.cn)("flex w-full items-center",a)})}),v=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,l.cn)("flex flex-row gap-3",a)})}),w=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,l.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),N=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,l.cn)(i,o,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",u.displayName="ScaffoldTitle",m.displayName="ScaffoldDescription",c.displayName="ScaffoldContainer",f.displayName="ScaffoldDivider",x.displayName="ScaffoldSection",w.displayName="ScaffoldColumn",g.displayName="ScaffoldSectionDetail",y.displayName="ScaffoldSectionContent",b.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",v.displayName="ScaffoldActionsGroup",N.displayName="ScaffoldContainerLegacy",h.displayName="ScaffoldSectionTitle",p.displayName="ScaffoldSectionDescription"},85085:function(e,t,a){"use strict";a.d(t,{i:function(){return r}});var s=a(97458),n=a(94997);let r=e=>{let{form:t,hasChanges:a,handleReset:r,helper:l,disabled:i=!1,isSubmitting:o,submitText:c="Save"}=e,d=o||i||!a&&void 0!==a;return(0,s.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,s.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.z,{disabled:d,type:"default",htmlType:"reset",onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,s.jsx)(n.z,{form:t,type:"primary",htmlType:"submit",disabled:d,loading:o,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:c})]})]})}},65830:function(e,t,a){"use strict";a.d(t,{DO:function(){return c},Tq:function(){return i},by:function(){return l},iL:function(){return o},m9:function(){return d}});var s=a(97458),n=a(52983),r=a(53355);let l=e=>{let{children:t,header:a,footer:n}=e;return(0,s.jsxs)(i,{"data-sentry-element":"FormPanelContainer","data-sentry-component":"FormPanel","data-sentry-source-file":"FormPanel.tsx",children:[a&&(0,s.jsx)(o,{children:a}),(0,s.jsx)(c,{className:"divide-y","data-sentry-element":"FormPanelContent","data-sentry-source-file":"FormPanel.tsx",children:t}),n&&(0,s.jsx)(d,{children:n})]})},i=(0,n.forwardRef)((e,t)=>{let{children:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,r.cn)("bg-surface-100 border overflow-hidden rounded-md shadow max-w-full",n.className),children:a})});i.displayName=i.displayName;let o=(0,n.forwardRef)((e,t)=>{let{children:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,r.cn)("border-default border-b px-8 py-4",n.className),children:a})});o.displayName=o.displayName;let c=(0,n.forwardRef)((e,t)=>{let{children:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,r.cn)("divide-border flex flex-col gap-0",n.className),children:a})});c.displayName=c.displayName;let d=(0,n.forwardRef)((e,t)=>{let{children:a,...n}=e;return(0,s.jsx)("div",{ref:t,...n,className:(0,r.cn)("border-t",n.className),children:a})});d.displayName=d.displayName},48808:function(e,t,a){"use strict";var s=a(97458),n=a(61401),r=a(87830),l=a(36030),i=a(89462),o=a.n(i),c=a(52983),d=a(94997);let u=(0,c.forwardRef)((e,t)=>{let{icon:a,title:i,description:u,url:m,urlLabel:x="Read more",defaultVisibility:f=!1,hideCollapse:h=!1,button:p,className:g="",block:y=!1}=e,[b,j]=(0,c.useState)(f);return(0,s.jsx)("div",{ref:t,role:"alert",className:"".concat(y?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(g),children:(0,s.jsxs)("div",{className:"flex flex-col px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[a&&(0,s.jsx)("span",{className:"text-foreground-lighter",children:a}),(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("h5",{className:"text-sm text-foreground",children:i})})]}),u&&!h?(0,s.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>j(!b),children:b?(0,s.jsx)(n.Z,{size:14,strokeWidth:1.5}):(0,s.jsx)(r.Z,{size:14,strokeWidth:1.5})}):null]}),(u||m||p)&&(0,s.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(b?"mt-3":""),style:{maxHeight:b?500:0},children:[(0,s.jsx)("div",{className:"text-foreground-light text-sm",children:u}),m&&(0,s.jsx)("div",{children:(0,s.jsx)(d.z,{asChild:!0,type:"default",icon:(0,s.jsx)(l.Z,{}),children:(0,s.jsx)(o(),{href:m,target:"_blank",rel:"noreferrer",children:x})})}),p&&(0,s.jsx)("div",{children:p})]})]})})});u.displayName="InformationBox",t.Z=u},94821:function(e,t,a){"use strict";var s=a(97458),n=a(89462),r=a.n(n),l=a(59630),i=a(35772),o=a(94997);t.Z=e=>{let{name:t="",isActive:a,isExternal:n,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:x,textClassName:f="",hoverText:h="",label:p}=e,g=(0,s.jsx)(l.ZP.Item,{icon:c,rounded:!0,active:a,onClick:x,children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,s.jsxs)("div",{title:h||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+f,children:[(0,s.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==p&&(0,s.jsx)(i.C,{variant:"warning",className:"py-0 px-1.5 capitalize",children:p})]}),d&&(0,s.jsx)("div",{children:d})]})});return u?n?(0,s.jsx)(o.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,s.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,s.jsx)(r(),{href:u,className:"block",target:m,children:g}):g}},3897:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eJ}});var s=a(97458),n=a(7406),r=a(36457),l=a(77070),i=a(52983),o=a(34549),c=a(54580),d=a(41888),u=a(15516),m=a(91371),x=a(91168),f=a(1935),h=a(14654),p=a(94220),g=a(42577),y=a(34438),b=a(42725),j=a(73614),v=a(29859),w=a(52286),N=a(35772);let S={[n.$X.APIServicesConfigurationUpdateFailed]:"failed to update configuration for API services",[n.$X.APIServicesRestartFailed]:"failed to restart API services",[n.$X.DatabaseAdminAPIConfigurationUpdateFailed]:"failed to update configuration for database admin API",[n.$X.PostgreSQLRestartFailed]:"failed to restart PostgreSQL service",[n.$X.SupabaseAPIKeyUpdateFailed]:"failed to update Supabase API key",[n.$X.APIGatewayUpdateFailed]:"failed to update API Gateway"},P={[n.GJ.RestartedAPIServices]:"restarted API services",[n.GJ.RestartedPostgreSQL]:"restarted PostgreSQL service",[n.GJ.Started]:"started updating",[n.GJ.UpdatedAPIServicesConfiguration]:"updated configuration for API services",[n.GJ.UpdatedDatabaseAdminAPIConfiguration]:"updated configuration for database admin API",[n.GJ.UpdatedAPIGatewayConfiguration]:"updated configuration for API Gateway"};var k=a(40540),C=a(37905),A=a(12636),I=a(12708);let _=(0,a(88122).Z)("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);var T=a(56816),E=a(4752),R=a(69647),z=a(18648),M=a(61802),F=a(64618),Z=a(64472);async function D(e){let{projectRef:t,jwtSecret:a,changeTrackingId:s}=e,{data:n,error:r}=await (0,Z.r$)("/platform/projects/{ref}/config/secrets",{params:{path:{ref:t}},body:{jwt_secret:a,change_tracking_id:s}});return r&&(0,Z.S3)(r),n}let L=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.NL)();return(0,F.D)(e=>D(e),{async onSuccess(t,a,n){let{projectRef:r}=a;await s.invalidateQueries(p.U.jwtSecretUpdatingStatus(r)),await (null==e?void 0:e(t,a,n))},async onError(e,a,s){void 0===t?o.Am.error("Failed to submit JWT secret update request: ".concat(e.message)):t(e,a,s)},...a})};var W=a(11603),J=a(80263),U=a(99901),H=a(29375),q=a(9618),V=a(45057),G=a(95),X=a(94997),O=a(34814),Q=a(49613),B=a(8607),$=a(82634),Y=a(58614),K=a(648),ee=a(85085);let et=(0,z.object)({JWT_EXP:(0,z.number)().max(604800,"Must be less than 604800").required("Must have a JWT expiry value")});var ea=()=>{var e;let{ref:t}=(0,c.UO)(),[a,r]=(0,i.useState)(""),[d,u]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),y=(0,H.Xo)(k.KA.READ,"field.jwt_secret"),b=(0,H.Xo)(k.KA.INFRA_EXECUTE,"queue_job.projects.update_jwt"),j=(0,H.Xo)(k.KA.UPDATE,"custom_config_gotrue"),{data:v}=(0,h.t)({projectRef:t}),{data:N,isError:z}=(0,W.s)({projectRef:t}),{mutateAsync:F,isLoading:Z}=L(),{data:D,error:ea,isLoading:es,isSuccess:en}=(0,J.$E)({projectRef:t}),{mutate:er,isLoading:el}=(0,U._)(),{Failed:ei,Updated:eo,Updating:ec}=n.JwtSecretUpdateStatus,ed=(null==v?void 0:v.jwtSecretUpdateStatus)===ei,eu=(null==v?void 0:v.jwtSecretUpdateStatus)===void 0||(null==v?void 0:v.jwtSecretUpdateStatus)===eo,em=(null==v?void 0:v.jwtSecretUpdateStatus)===ec,ex=S[null==v?void 0:v.jwtSecretUpdateError],ef=P[null==v?void 0:v.jwtSecretUpdateProgress],eh={JWT_EXP:null!==(e=null==D?void 0:D.JWT_EXP)&&void 0!==e?e:3600},ep=async(e,a)=>{let{resetForm:s}=a;if(!t)return console.error("Project ref is required");er({projectRef:t,config:e},{onError:e=>{o.Am.error("Failed to update JWT expiry: ".concat(null==e?void 0:e.message))},onSuccess:()=>{o.Am.success("Successfully updated JWT expiry"),s({values:e,initialValues:e})}})};async function eg(e,a){if(!t)return console.error("Project ref is required");let s=(0,q.k$)();try{await F({projectRef:t,jwtSecret:e,changeTrackingId:s}),a(!1),(0,o.Am)("Successfully submitted JWT secret update request. Please wait while your project is updated.")}catch(e){}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V.Z,{id:"jwt-exp-form",initialValues:eh,onSubmit:ep,validationSchema:et,"data-sentry-element":"Form","data-sentry-source-file":"JWTSettings.tsx",children:e=>{let{handleReset:t,values:a,initialValues:n}=e,r=JSON.stringify(a)!==JSON.stringify(n);return(0,s.jsx)(m.Z,{title:(0,s.jsx)("h5",{className:"mb-0",children:"JWT Settings"}),footer:(0,s.jsx)("div",{className:"flex py-4 w-full",children:(0,s.jsx)(ee.i,{form:"jwt-exp-form",isSubmitting:el,hasChanges:r,handleReset:t,disabled:!j,helper:j?void 0:"You need additional permissions to update JWT settings"})}),children:(0,s.jsx)(m.Z.Content,{className:"space-y-6 border-t border-panel-border-interior-light [[data-theme*=dark]_&]:border-panel-border-interior-dark",children:z?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,s.jsx)(l.Z,{size:16,strokeWidth:1.5}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Failed to retrieve JWT settings"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{label:"JWT Secret",readOnly:!0,copy:y&&eu,reveal:y&&eu,disabled:!0,value:y?ed?"JWT secret update failed":em?"Updating JWT secret...":(null==N?void 0:N.jwt_secret)||"":"You need additional permissions to view the JWT secret",className:"input-mono",descriptionText:"Used to decode your JWTs. You can also use this to mint your own JWTs.",layout:"horizontal"}),(0,s.jsx)(G.Z,{id:"JWT_EXP",name:"JWT_EXP",size:"small",label:"Access token expiry time",descriptionText:"How long access tokens are valid for before a refresh token has to be used. Recommendation: 3600 (1 hour).",layout:"horizontal",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!j||es}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"p-3 px-6 border rounded-md shadow-sm bg-studio",children:em?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(C.Z,{className:"animate-spin",size:14}),(0,s.jsxs)("p",{className:"text-sm",children:["Updating JWT secret: ",ef]})]}):(0,s.jsx)("div",{className:"w-full space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm",children:"Generate a new JWT secret"}),(0,s.jsx)("p",{className:"text-sm opacity-50",children:"A random secret will be created, or you can create your own."})]}),(0,s.jsx)("div",{className:"flex flex-col items-end",children:em?(0,s.jsx)(X.z,{loading:!0,type:"secondary",children:"Updating JWT secret..."}):b?(0,s.jsxs)(O.h_,{children:[(0,s.jsx)(O.$F,{asChild:!0,children:(0,s.jsx)(X.z,{type:"default",iconRight:(0,s.jsx)(A.Z,{size:14}),children:(0,s.jsx)("span",{children:"Generate a new secret"})})}),(0,s.jsxs)(O.AW,{align:"end",side:"bottom",children:[(0,s.jsxs)(O.Xi,{className:"space-x-2",onClick:()=>g(!0),children:[(0,s.jsx)(I.Z,{size:16}),(0,s.jsx)("p",{children:"Generate a random secret"})]}),(0,s.jsx)(O.VD,{}),(0,s.jsxs)(O.Xi,{className:"space-x-2",onClick:()=>f(!0),children:[(0,s.jsx)(_,{size:16}),(0,s.jsx)("p",{children:"Create my own secret"})]})]})]}):(0,s.jsx)(M.u,{disabled:!0,type:"default",iconRight:(0,s.jsx)(A.Z,{size:14}),tooltip:{content:{side:"bottom",text:"You need additional permissions to generate a new JWT secret"}},children:"Generate a new secret"})})]})})}),ed?(0,s.jsxs)(K.J,{type:"warning",title:"Failed to update JWT secret",children:["Please try again. If the failures persist, please contact Supabase support with the following details: ",(0,s.jsx)("br",{}),"Change tracking ID: ",null==v?void 0:v.changeTrackingId," ",(0,s.jsx)("br",{}),"Error message: ",ex]}):null]})]})})})}},null==D?void 0:D.JWT_EXP),(0,s.jsx)(Y.Z,{variant:"destructive",size:"medium",visible:p,title:"Confirm to generate a new JWT secret",confirmLabel:"Generate new secret",confirmLabelLoading:"Generating",onCancel:()=>g(!1),onConfirm:()=>eg("ROLL",g),alert:{title:"This will invalidate all existing API keys",description:(0,s.jsxs)(s.Fragment,{children:["Generating a new JWT secret will invalidate ",(0,s.jsx)("u",{className:"text-foreground",children:"all"})," of your API keys, including your ",(0,s.jsx)("code",{className:"text-xs",children:"service_role"})," and"," ",(0,s.jsx)("code",{className:"text-xs",children:"anon"})," keys. Your project will also be restarted during this process, which will terminate any existing connections. You may receive API errors for up to 2 minutes while the new secret is deployed."]})},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"JWTSettings.tsx",children:(0,s.jsx)("p",{className:"text-foreground text-sm",children:"This action cannot be undone and the old JWT secret will be lost. All existing API keys will be invalidated, and any open connections will be terminated."})}),(0,s.jsx)(Q.Z,{header:"Create a custom JWT secret",visible:x,size:"medium",variant:"danger",loading:Z,customFooter:(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(X.z,{type:"default",onClick:()=>f(!1),children:"Cancel"}),(0,s.jsx)(X.z,{type:"primary",disabled:a.length<32||a.includes("@")||a.includes("$"),loading:Z,onClick:()=>eg(a,f),children:"Apply new JWT secret"})]}),"data-sentry-element":"Modal","data-sentry-source-file":"JWTSettings.tsx",children:(0,s.jsxs)(Q.Z.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"JWTSettings.tsx",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Create a custom JWT secret. Make sure it is a strong combination of characters that cannot be guessed easily."}),(0,s.jsxs)(B.bZ,{variant:"warning","data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"JWTSettings.tsx",children:[(0,s.jsx)($.aN,{"data-sentry-element":"WarningIcon","data-sentry-source-file":"JWTSettings.tsx"}),(0,s.jsx)(B.Cd,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"JWTSettings.tsx",children:"This will invalidate all existing API keys"}),(0,s.jsxs)(B.X,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"JWTSettings.tsx",children:["Generating a new JWT secret will invalidate ",(0,s.jsx)("u",{className:"text-foreground",children:"all"})," of your API keys, including your ",(0,s.jsx)("code",{className:"text-xs",children:"service_role"})," and"," ",(0,s.jsx)("code",{className:"text-xs",children:"anon"})," keys. Your project will also be restarted during this process, which will terminate any existing connections."]})]}),(0,s.jsx)(w.Z,{onChange:e=>r(e.target.value),value:a,icon:(0,s.jsx)(T.Z,{}),type:d?"text":"password",className:"w-full text-left",label:"Custom JWT secret",descriptionText:"Minimally 32 characters long, '@' and '$' are not allowed.",actions:(0,s.jsx)("div",{className:"flex items-center justify-center mr-1",children:(0,s.jsx)(X.z,{type:"default",icon:d?(0,s.jsx)(E.Z,{}):(0,s.jsx)(R.Z,{}),onClick:()=>u(!d)})}),"data-sentry-element":"Input","data-sentry-source-file":"JWTSettings.tsx"})]})})]})},es=a(52585),en=a(17318),er=a.n(en),el=a(59113),ei=a(89462),eo=a.n(ei),ec=a(86848),ed=a(5394),eu=a(9846),em=a(65830),ex=a(4703),ef=a(85771),eh=a(10452),ep=a(1006),eg=a(94823),ey=a(65422),eb=a(81523),ej=a(17634),ev=a(21758),ew=a(11644),eN=a(55417),eS=a(87699),eP=a(48808),ek=a(36337),eC=a(89089);async function eA(e){let{projectRef:t,connectionString:a,existingPostgrestConfig:s}=e;await (0,eC.R)({projectRef:t,connectionString:a,sql:"\ncreate schema if not exists api;\ngrant usage on schema api to anon, authenticated;\n  ".trim()});let{db_extra_search_path:n,db_pool:r,db_schema:l,max_rows:i}=s,{error:o}=await (0,Z.r$)("/platform/projects/{ref}/config/postgrest",{params:{path:{ref:t}},body:{db_pool:r,max_rows:i,db_extra_search_path:n,db_schema:"api, ".concat(l)}});return o&&(0,Z.S3)(o),!0}let eI=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.NL)();return(0,F.D)(e=>eA(e),{async onSuccess(t,a,n){let{projectRef:r}=a;await Promise.all([s.invalidateQueries(ek.A.schemas(r)),s.invalidateQueries(p.U.postgrest(r))]),await (null==e?void 0:e(t,a,n))},async onError(e,a,s){void 0===t?o.Am.error("Failed to create and expose API schema: ".concat(e.message)):t(e,a,s)},...a})};var e_=a(14612),eT=a(17741),eE=a(86038);let eR=e=>{var t;let{visible:a,onClose:n}=e,r=(0,e_.Vm)(),{data:l}=(0,eh.Q1)({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{data:i}=(0,W.s)({projectRef:null==r?void 0:r.ref}),c=(null!=l?l:[]).find(e=>"api"===e.name),d=null!==(t=null==i?void 0:i.db_schema.split(",").map(e=>e.trim()))&&void 0!==t?t:[],u=d.includes("api"),m=d.includes("public"),{mutate:x,isLoading:f}=eI({onSuccess:()=>{o.Am.success("Successfully created api schema and exposed via Data API")}}),{mutate:h,isLoading:p}=(0,ex.X)({onSuccess:()=>{o.Am.success("Success removed public schema from exposed schemas")}});return(0,s.jsx)(eT.Vq,{open:a,onOpenChange:n,"data-sentry-element":"Dialog","data-sentry-component":"HardenAPIModal","data-sentry-source-file":"HardenAPIModal.tsx",children:(0,s.jsxs)(eT.cZ,{size:"large","data-sentry-element":"DialogContent","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(eT.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsx)(eT.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"HardenAPIModal.tsx",children:"Switch the default API schema"}),(0,s.jsxs)(eT.Be,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"HardenAPIModal.tsx",children:["Expose a custom schema instead of the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema"]})]}),(0,s.jsx)(eT.P3,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(eT.VO,{className:"text-sm text-foreground-light","data-sentry-element":"DialogSection","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["By default, the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema is used to generate API routes. In some cases, it's better to use a custom schema. This is important if you use tools that generate tables in the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema to"," ",(0,s.jsx)("span",{className:"text-brand",children:"prevent accidental exposure of data"}),"."]}),(0,s.jsx)(eu.G,{abbrev:!1,className:"w-min mt-4",href:"https://supabase.com/docs/guides/database/hardening-data-api","data-sentry-element":"DocsButton","data-sentry-source-file":"HardenAPIModal.tsx"})]}),(0,s.jsx)(eT.P3,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(eb.zF,{"data-sentry-element":"Collapsible_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(eb.wy,{className:"py-4 px-5 w-full flex items-center justify-between text-sm","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["1. Create a custom ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema and expose it"]}),c&&u?(0,s.jsx)(eS.Z,{size:16,className:"text-brand"}):(0,s.jsx)(A.Z,{size:16,className:"transition data-open-parent:rotate-180 data-closed-parent:rotate-0"})]}),(0,s.jsxs)(eb.Fw,{className:"text-sm text-foreground-light flex flex-col gap-y-4","data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{className:"mx-5",children:["Click the button below to create a new schema named"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," and grant the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"anon"})," and"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"authenticated"})," roles usage privileges on this schema. This schema will thereafter also be exposed to the Data API."]}),(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)(eP.Z,{title:"How is the schema created?",description:(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsxs)("p",{children:["The following query will be run to create the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema , as well as to grant the necessary privileges to the respective roles"]}),(0,s.jsx)(eE.d,{language:"sql",className:"p-1 language-bash prose dark:prose-dark max-w-[68.3ch]",children:"create schema if not exists api;\ngrant usage on schema api to anon, authenticated;"})]}),"data-sentry-element":"InformationBox","data-sentry-source-file":"HardenAPIModal.tsx"})}),(0,s.jsx)(M.u,{type:"primary",className:"w-min mx-5",onClick:()=>void 0===r?console.error("Project is required"):void 0===i?console.error("Postgrest config is required"):void x({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString,existingPostgrestConfig:{max_rows:i.max_rows,db_pool:i.db_pool,db_schema:i.db_schema,db_extra_search_path:null==i?void 0:i.db_extra_search_path}}),disabled:c&&u,loading:f,tooltip:{content:{side:"right",text:c&&u?"Schema has already been created and exposed":void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HardenAPIModal.tsx",children:"Create and expose schema to Data API"}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 px-5 pb-4",children:[(0,s.jsxs)("p",{children:["Under these new settings, the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"anon"})," ","and ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"authenticated"})," roles can execute functions defined in the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," ","schema, but they have no automatic permissions on any tables. On a table-by-table basis, you can grant them permissions by running the following command:"]}),(0,s.jsx)(eE.d,{language:"sql",className:"p-1 language-bash prose dark:prose-dark max-w-[68.3ch]","data-sentry-element":"CodeBlock","data-sentry-source-file":"HardenAPIModal.tsx",children:"grant select on table api.<your_table> to anon;\ngrant select, insert, update, delete on table api.<your_table> to authenticated;"})]})]})]}),(0,s.jsx)(eT.P3,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(eb.zF,{"data-sentry-element":"Collapsible_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(eb.wy,{className:"py-4 px-5 w-full flex items-center justify-between text-sm","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["2. Remove the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema from the exposed schemas"]}),m?(0,s.jsx)(A.Z,{size:16,className:"transition data-open-parent:rotate-180 data-closed-parent:rotate-0"}):(0,s.jsx)(eS.Z,{size:16,className:"text-brand"})]}),(0,s.jsx)(eb.Fw,{className:"text-sm text-foreground-light","data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:(0,s.jsxs)("div",{className:"px-5 pb-4 flex flex-col gap-y-4",children:[(0,s.jsxs)(B.bZ,{variant:"warning","data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsx)($.aN,{"data-sentry-element":"WarningIcon","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(B.Cd,{className:"text-foreground","data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:["Ensure that your app is no longer using the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema"]}),(0,s.jsxs)(B.X,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:["The ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema will not be accessible via the API once its not exposed. You should be using the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema instead."]})]}),(0,s.jsxs)("p",{children:["Click the button below to remove the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema from both Exposed schemas and Extra search path in your API configuration."]}),(0,s.jsx)(M.u,{type:"primary",className:"w-min",disabled:!m,loading:p,tooltip:{content:{side:"right",text:m?void 0:"Public schema no longer exposed"}},onClick:()=>{if(void 0===r)return console.error("Project is required");if(void 0===i)return console.error("Postgrest config is required");let e=i.db_extra_search_path.split(",").map(e=>e.trim()).filter(e=>"public"!==e).join(", "),t=i.db_schema.split(",").map(e=>e.trim()).filter(e=>"public"!==e).join(", ");h({projectRef:r.ref,maxRows:i.max_rows,dbPool:i.db_pool,dbSchema:t,dbExtraSearchPath:e})},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HardenAPIModal.tsx",children:"Remove public schema from exposed schemas"})]})})]})]})})},ez=ed.z.object({dbSchema:ed.z.array(ed.z.string()),dbExtraSearchPath:ed.z.string(),maxRows:ed.z.number().max(1e6,"Can't be more than 1,000,000"),dbPool:ed.z.number().min(0,"Must be more than 0").max(1e3,"Can't be more than 1000").optional().nullable(),enableDataApi:ed.z.boolean()}).refine(e=>!e.enableDataApi||0!==e.dbSchema.length,{message:"Must have at least one schema if Data API is enabled",path:["dbSchema"]}),eM=()=>{var e,t;let{ref:a}=(0,c.UO)(),{project:n}=(0,d.d2)(),[r,l]=(0,i.useState)(!1),{data:u,isError:m}=(0,W.s)({projectRef:a}),{data:x}=(0,ef.H)({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString}),{data:f,isLoading:h}=(0,eh.Q1)({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString}),{mutate:p,isLoading:g}=(0,ex.X)({onSuccess:()=>{o.Am.success("Successfully saved settings")}}),y="project-postgres-config",b=["auth","pgbouncer","hooks","extensions"],j=(0,H.Xo)(k.KA.UPDATE,"custom_config_postgrest"),v=(null===(e=(null!=x?x:[]).find(e=>"pg_graphql"===e.name))||void 0===e?void 0:e.installed_version)!==null,w=(null==u?void 0:u.db_schema)?null==u?void 0:u.db_schema.replace(/ /g,"").split(","):[],N={dbSchema:w,maxRows:null==u?void 0:u.max_rows,dbExtraSearchPath:null==u?void 0:u.db_extra_search_path,dbPool:null==u?void 0:u.db_pool},S=(0,ec.cI)({resolver:(0,es.F)(ez),mode:"onChange",defaultValues:N}),P=null!==(t=null==f?void 0:f.filter(e=>{if(0>er()(b,e.name))return e}).map(e=>({id:e.id,value:e.name,name:e.name,disabled:!1})))&&void 0!==t?t:[];function C(){let e=null!=u&&!!u.db_schema;S.reset({...N,enableDataApi:e})}let A=async e=>{if(!a)return console.error("Project ref is required");p({projectRef:a,dbSchema:e.dbSchema.join(", "),maxRows:e.maxRows,dbExtraSearchPath:e.dbExtraSearchPath,dbPool:e.dbPool?e.dbPool:null})};(0,i.useEffect)(()=>{u&&C()},[u]);let I=S.getValues("enableDataApi");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.l0,{...S,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"PostgrestConfig.tsx",children:(0,s.jsx)("form",{id:y,onSubmit:S.handleSubmit(A),children:(0,s.jsxs)(em.Tq,{"data-sentry-element":"FormPanelContainer","data-sentry-source-file":"PostgrestConfig.tsx",children:[(0,s.jsxs)(em.iL,{className:"flex items-center justify-between","data-sentry-element":"FormPanelHeader","data-sentry-source-file":"PostgrestConfig.tsx",children:[(0,s.jsx)("span",{children:"Data API Settings"}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)(eu.G,{href:"https://supabase.com/docs/guides/database/connecting-to-postgres#data-apis","data-sentry-element":"DocsButton","data-sentry-source-file":"PostgrestConfig.tsx"}),(0,s.jsx)(X.z,{type:"default",icon:(0,s.jsx)(el.Z,{}),onClick:()=>l(!0),"data-sentry-element":"Button","data-sentry-source-file":"PostgrestConfig.tsx",children:"Harden Data API"})]})]}),(0,s.jsxs)(em.DO,{"data-sentry-element":"FormPanelContent","data-sentry-source-file":"PostgrestConfig.tsx",children:[m?(0,s.jsx)(K.J,{type:"destructive",title:"Failed to retrieve API settings"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.Wi,{control:S.control,name:"enableDataApi",render:e=>{let{field:t}=e;return(0,s.jsxs)(ep.xJ,{className:"w-full",children:[(0,s.jsx)(ew.E,{className:"w-full px-8 py-8",layout:"flex",label:"Enable Data API",description:"When enabled you will be able to use any Supabase client library and PostgREST endpoints with any schema configured below.",children:(0,s.jsx)(ep.NI,{children:(0,s.jsx)(eg.r,{size:"large",disabled:!j,checked:t.value,onCheckedChange:e=>{t.onChange(e),e?(S.setValue("enableDataApi",!0),S.setValue("dbSchema",w)):(S.setValue("enableDataApi",!1),S.setValue("dbSchema",[]))}})})}),!t.value&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.Z,{}),(0,s.jsxs)(B.bZ,{variant:"warning",className:"mb-0 border-none rounded-none",children:[(0,s.jsx)($.aN,{className:"!left-[2rem]"}),(0,s.jsx)(B.Cd,{className:"!pl-[3.5rem] !left-[6rem]",children:"No schemas can be queried"}),(0,s.jsxs)(B.X,{className:"!pl-[3.5rem]",children:[(0,s.jsx)("p",{children:"With this setting disabled, you will not be able to query any schemas via the Data API."}),(0,s.jsxs)("p",{children:["You will see errors from the Postgrest endpoint",(0,s.jsx)("code",{className:"text-xs",children:"/rest/v1/"}),"."]})]})]})]})]})}}),(0,s.jsx)(eb.zF,{open:S.getValues("enableDataApi"),children:(0,s.jsxs)(eb.Fw,{className:"border-t divide-y transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down",children:[(0,s.jsx)(ep.Wi,{control:S.control,name:"dbSchema",render:e=>{let{field:t}=e;return(0,s.jsx)(ep.xJ,{className:"w-full",children:(0,s.jsxs)(ew.E,{label:"Exposed schemas",description:"The schemas to expose in your API. Tables, views and stored procedures in these schemas will get API endpoints.",layout:"horizontal",className:"px-8 py-8",children:[h?(0,s.jsx)("div",{className:"col-span-12 flex flex-col gap-2 lg:col-span-7",children:(0,s.jsx)(ej.O,{className:"w-full h-[38px]"})}):(0,s.jsxs)(eN.C2,{onValuesChange:t.onChange,values:t.value,size:"small",disabled:!j||!I,children:[(0,s.jsx)(eN.VG,{mode:"inline-combobox",label:"Select schemas for Data API...",badgeLimit:"wrap",showIcon:!1,deletableBadge:!0}),(0,s.jsx)(eN.rO,{children:(0,s.jsx)(eN.yy,{children:P.length<=0?(0,s.jsx)(eN.an,{value:"no",children:"no"},"empty"):(0,s.jsx)(s.Fragment,{children:P.map(e=>(0,s.jsx)(eN.an,{value:e.name,children:e.name},e.id+"-"+e.name))})})})]}),!t.value.includes("public")&&t.value.length>0&&(0,s.jsx)(K.J,{type:"default",title:"The public schema for this project is not exposed",className:"mt-2",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["You will not be able to query tables and views in the"," ",(0,s.jsx)("code",{children:"public"})," schema via supabase-js or HTTP clients."]}),v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Tables in the ",(0,s.jsx)("code",{className:"text-xs",children:"public"})," ","schema are still exposed over our GraphQL endpoints."]}),(0,s.jsx)(X.z,{asChild:!0,type:"default",children:(0,s.jsx)(eo(),{href:"/project/".concat(a,"/database/extensions"),children:"Disable the pg_graphql extension"})})]})]})})]})})}}),(0,s.jsx)(ep.Wi,{control:S.control,name:"dbExtraSearchPath",render:e=>{let{field:t}=e;return(0,s.jsx)(ep.xJ,{className:"w-full",children:(0,s.jsx)(ew.E,{className:"w-full px-8 py-8",layout:"horizontal",label:"Extra search path",description:"Extra schemas to add to the search path of every request. Multiple schemas must be comma-separated.",children:(0,s.jsx)(ep.NI,{children:(0,s.jsx)(ev.I,{size:"small",disabled:!j||!I,...t})})})})}}),(0,s.jsx)(ep.Wi,{control:S.control,name:"maxRows",render:e=>{let{field:t}=e;return(0,s.jsx)(ep.xJ,{className:"w-full",children:(0,s.jsx)(ew.E,{className:"w-full px-8 py-8",layout:"horizontal",label:"Max rows",description:"The maximum number of rows returned from a view, table, or stored procedure. Limits payload size for accidental or malicious requests.",children:(0,s.jsx)(ep.NI,{children:(0,s.jsx)(ev.I,{size:"small",disabled:!j||!I,...t,type:"number",...S.register("maxRows",{valueAsNumber:!0})})})})})}}),(0,s.jsx)(ep.Wi,{control:S.control,name:"dbPool",render:e=>{let{field:t}=e;return(0,s.jsx)(ep.xJ,{className:"w-full",children:(0,s.jsx)(ew.E,{className:"w-full px-8 py-8",layout:"horizontal",label:"Pool size",description:"Number of maximum connections to keep open in the Data API server's database pool. Unset to let it be configured automatically based on compute size.",children:(0,s.jsx)(ep.NI,{children:(0,s.jsx)(ev.I,{size:"small",disabled:!j||!I,...t,type:"number",placeholder:"Configured automatically based on compute size",onChange:e=>t.onChange(""===e.target.value?null:Number(e.target.value)),value:null===t.value?"":t.value})})})})}})]})})]}),(0,s.jsx)(em.m9,{className:"flex px-8 py-4","data-sentry-element":"FormPanelFooter","data-sentry-source-file":"PostgrestConfig.tsx",children:(0,s.jsx)(ee.i,{form:y,isSubmitting:g,hasChanges:S.formState.isDirty,handleReset:C,disabled:!j,helper:j?void 0:"You need additional permissions to update your project's API settings","data-sentry-element":"FormActions","data-sentry-source-file":"PostgrestConfig.tsx"})})]})]})})}),(0,s.jsx)(eR,{visible:r,onClose:()=>l(!1),"data-sentry-element":"HardenAPIModal","data-sentry-source-file":"PostgrestConfig.tsx"})]})};var eF=()=>{var e,t;let a=(0,r.NL)(),{project:P,isLoading:k}=(0,d.d2)(),{ref:C,source:A}=(0,c.UO)(),I=(0,v.TF)(),{data:_}=(0,g.z)({projectRef:C}),{data:T,isError:E}=(0,b.bN)({projectRef:C}),{data:R}=(0,y.j)({projectRef:C}),{data:z}=(0,h.t)({projectRef:C}),M=null==z?void 0:z.jwtSecretUpdateStatus,F=null==z?void 0:z.jwtSecretUpdateError,Z=(0,i.useRef)(),{Failed:D,Updated:L,Updating:W}=n.JwtSecretUpdateStatus,J=S[F],U=(null==_?void 0:null===(e=_.customDomain)||void 0===e?void 0:e.status)==="active",H=null==T?void 0:T.find(e=>e.identifier===I.selectedDatabaseId),q="load-balancer"===I.selectedDatabaseId,V=(null==H?void 0:H.identifier)!==C,G=U&&I.selectedDatabaseId===C?"https://".concat(_.customDomain.hostname):q?null!==(t=null==R?void 0:R[0].endpoint)&&void 0!==t?t:"":null==H?void 0:H.restUrl;return(0,i.useEffect)(()=>{if(Z.current===W)switch(M){case L:a.invalidateQueries(p.U.api(C)),a.invalidateQueries(p.U.settings(C)),a.invalidateQueries(p.U.postgrest(C)),o.Am.success("Successfully updated JWT secret");break;case D:o.Am.error("JWT secret update failed: ".concat(J))}Z.current=M},[M]),(0,i.useEffect)(()=>{void 0!==A&&I.setSelectedDatabaseId("load-balancer")},[A]),(0,s.jsx)("div",{"data-sentry-component":"ServiceList","data-sentry-source-file":"ServiceList.tsx",children:k?(0,s.jsx)(f.A,{}):(null==P?void 0:P.status)!==j.S.ACTIVE_HEALTHY?(0,s.jsxs)("div",{className:"flex items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:[(0,s.jsx)(l.Z,{size:16}),(0,s.jsx)("p",{className:"text-sm text-foreground-light ml-2",children:"API settings are unavailable as the project is not active"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{children:(0,s.jsx)(m.Z,{title:(0,s.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,s.jsx)("h5",{className:"mb-0",children:"Project URL"}),(0,s.jsx)(u.Z,{additionalOptions:(null!=R?R:[]).length>0?[{id:"load-balancer",name:"API Load Balancer"}]:[]})]}),children:(0,s.jsx)(m.Z.Content,{children:E?(0,s.jsxs)("div",{className:"flex items-center justify-center py-4 space-x-2",children:[(0,s.jsx)(l.Z,{size:16}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Failed to retrieve project URL"})]}):(0,s.jsx)(w.Z,{copy:!0,label:U?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{children:"URL"}),(0,s.jsx)(N.C,{children:"Custom domain active"})]}):"URL",readOnly:!0,disabled:!0,className:"input-mono",value:G,descriptionText:q?"RESTful endpoint for querying and managing your databases through your load balancer":V?"RESTful endpoint for querying your read replica":"RESTful endpoint for querying and managing your database",layout:"horizontal"})})})}),(0,s.jsx)("section",{children:(0,s.jsx)(x.D,{},"DisplayAPISettings")}),(0,s.jsx)("section",{id:"jwt-settings",children:(0,s.jsx)(ea,{})}),(0,s.jsx)("section",{id:"postgrest-config",children:(0,s.jsx)(eM,{})})]})})},eZ=a(51164),eD=a(26713),eL=a(97847);let eW=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eL._S,{id:"billing-page-top","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eL.tU,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eL.q7,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"api.tsx",children:"API Settings"})})}),(0,s.jsx)(eL._S,{bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eF,{"data-sentry-element":"ServiceList","data-sentry-source-file":"api.tsx"})})]});eW.getLayout=e=>(0,s.jsx)(eZ.Z,{children:(0,s.jsx)(eD.Z,{title:"API Settings",children:e})});var eJ=eW},55417:function(e,t,a){"use strict";a.d(t,{C2:function(){return p},rO:function(){return j},an:function(){return w},yy:function(){return v},VG:function(){return g}});var s=a(97458),n=a(99740),r=a(67907),l=a(87699),i=a(52983),o=a(31706),c=a(56794),d=a(53355),u=a(35772),m=a(88990);let x=i.createContext(null),f=(0,d.cn)("relative text-foreground-lighter text-left px-2 py-1.5 rounded","hover:text-foreground hover:!bg-overlay-hover w-full flex items-center space-x-2","peer-data-[value=true]:bg-overlay-hover peer-data-[value=true]:text-strong");function h(){let e=i.useContext(x);if(!e)throw Error("useMultiSelect must be used within a MultiSelectProvider");return e}function p(e){var t;let{values:a=[],onValuesChange:n,disabled:r,dir:l,size:o,className:c,children:u,...f}=e,h=i.useRef(null),[p,g]=i.useState(!1),[y,b]=i.useState(""),[j,v]=i.useState(-1),w=i.useCallback(e=>{a.includes(e)?n(a.filter(t=>t!==e)||[]):n([...a,e])},[a]);t=()=>{p&&g(!p)},(0,i.useEffect)(()=>{let e=e=>{!h.current||h.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[h,t]);let N=i.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":a.length>0&&0===y.length&&(-1!==j&&j<a.length?(n(a.filter(e=>e!==a[j])),v(j-1<0?0:j-1)):n(a.filter(e=>e!==a[a.length-1])));break;case"Escape":if(-1!==j?v(-1):g(!1),h.current){let e=h.current.querySelector('button[role="combobox"]');e&&e.focus()}break;case"Enter":g(!0)}},[a,y,j]);return(0,s.jsx)(x.Provider,{value:{values:a,toggleValue:w,onValuesChange:n,open:p,setOpen:g,inputValue:y,setInputValue:b,activeIndex:j,setActiveIndex:v,size:o||"small",disabled:r},"data-sentry-element":"unknown","data-sentry-component":"MultiSelector","data-sentry-source-file":"multi-select.tsx",children:(0,s.jsx)(m.mY,{ref:h,onKeyDown:N,className:(0,d.cn)("relative w-auto overflow-visible bg-transparent flex flex-col",c),dir:l,...f,"data-sentry-element":"Command","data-sentry-source-file":"multi-select.tsx",children:u})})}(0,o.j)("",{variants:{size:{...c.Ld}},defaultVariants:{size:c.Rc}});let g=i.forwardRef((e,t)=>{let{label:a,persistLabel:l=!1,className:o,deletableBadge:c=!0,badgeLimit:m=9999,showIcon:x=!0,mode:f="combobox",children:p,...g}=e,{activeIndex:y,values:j,setInputValue:v,toggleValue:w,disabled:N,setOpen:S}=h(),P=i.useRef(null);i.useImperativeHandle(t,()=>P.current);let k=i.useRef(null),C=i.useRef(null),[A,I]=i.useState([]),[_,T]=i.useState(0),[E,R]=i.useState(!1),z="wrap"===m,M="number"==typeof m,F="inline-combobox"===f;i.useEffect(()=>{(null==P?void 0:P.current)&&C.current&&(z?(I(j),T(0)):(I(j.slice(0,m)),T(Math.max(0,j.length-m))))},[j,m]);let Z="rounded shrink-0 px-1.5",D=i.useCallback(e=>{S(!0),v(""),F&&(e.stopPropagation(),e.preventDefault(),setTimeout(()=>{var e;null===(e=k.current)||void 0===e||e.focus()},100))},[]);return(0,s.jsxs)("button",{ref:P,onClick:e=>!E&&D(e),disabled:N,type:"button",role:"combobox",className:(0,d.cn)("flex w-full min-w-[200px] min-h-[40px] items-center justify-between rounded-md border","border-alternative bg-foreground/[.026] px-3 py-2 text-sm","ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-primary transition-colors duration-200",o),...g,children:[(0,s.jsxs)("div",{ref:C,className:(0,d.cn)("flex gap-1 -ml-1 overflow-hidden flex-1",z&&"flex-wrap",!z&&"overflow-x-auto scrollbar-thin scrollbar-track-transparent transition-colors scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted scrollbar-thumb-rounded-lg"),children:[A.map(e=>(0,s.jsxs)(u.C,{className:Z,children:[e,c&&(0,s.jsx)("div",{onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onClick:t=>{t.stopPropagation(),w(e),R(!1)},className:"ml-1 text-foreground-lighter hover:text-foreground-light transition-colors pointer-events-auto",children:(0,s.jsx)(n.Z,{size:12})})]},e)),_>0&&(0,s.jsx)(u.C,{className:Z,children:M&&m<1?"".concat(_," item").concat(_>1?"s":""," selected"):"+".concat(_)}),(0,s.jsx)("span",{className:(0,d.cn)("text-foreground-muted whitespace-nowrap leading-[1.375rem] ml-1 opacity-0 transition-opacity hidden",!F&&(l||0===j.length)&&"opacity-100 visible inline"),children:a}),F&&(0,s.jsx)(b,{ref:k,showSearchIcon:!1,onValueChange:-1===y?v:void 0,placeholder:a,autoFocus:!1,wrapperClassName:(0,d.cn)("px-0 flex-1 border-none truncate",z&&"min-w-[85px]"),className:"py-0 px-1 truncate"})]}),x&&(0,s.jsx)(r.Z,{size:16,strokeWidth:2,className:"text-foreground-lighter shrink-0 ml-1.5"})]})});g.displayName="MultiSelectorTrigger",p.Trigger=g;let y=(0,o.j)("bg-control border",{variants:{size:{...c.Ld}},defaultVariants:{size:c.Rc}}),b=i.forwardRef((e,t)=>{let{className:a,wrapperClassName:n,showResetIcon:r,showSearchIcon:l,...o}=e,{open:c,setOpen:u,inputValue:x,setInputValue:f,activeIndex:p,setActiveIndex:g,size:b,disabled:j}=h(),v=i.useRef(null);i.useImperativeHandle(t,()=>v.current);let w=()=>{setTimeout(()=>{(null==v?void 0:v.current)&&c&&v.current.focus()},100)};return(0,i.useEffect)(()=>{if(w(),!c){var e;null===(e=v.current)||void 0===e||e.blur()}},[c]),(0,s.jsx)(m.sZ,{ref:v,value:x,onValueChange:-1===p?f:void 0,onFocus:()=>u(!0),onClick:()=>g(-1),tabIndex:c?0:-1,disabled:j,showSearchIcon:l,showResetIcon:r,handleReset:()=>{f(""),w()},wrapperClassName:n,className:(0,d.cn)(y({size:b}),"text-sm bg-transparent h-full flex-grow border-none outline-none placeholder:text-foreground-muted flex-1",-1!==p&&"caret-transparent",a),...o})});b.displayName="MultiSelectorInput",p.Input=b;let j=i.forwardRef((e,t)=>{let{className:a,children:n}=e,{open:r}=h();return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("absolute w-full bg-overlay shadow-md z-10 border border-overlay top-[calc(100%+0.25rem)] rounded-md transition-all -translate-y-3",r?"opacity-100 translate-y-0 visible duration-150 ease-[.76,0,.23,1]":"opacity-0 -translate-y-3 invisible duration-0",a),children:r&&n})});j.displayName="MultiSelectorContent",p.Content=j;let v=i.forwardRef((e,t)=>{let{className:a,children:n,creatable:r=!1}=e,{open:l,inputValue:i,setInputValue:o,toggleValue:c}=h(),u=n?Array.isArray(n)?n:"object"==typeof n&&"props"in n?n.props.children:[]:[],x=u.filter(e=>!!e.props.value).map(e=>e.props.value.toLowerCase()).some(e=>e===i.toLowerCase());return(0,s.jsxs)(m.e8,{ref:t,className:(0,d.cn)("p-2 flex flex-col gap-2 scrollbar-thin scrollbar-track-transparent transition-colors","scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted","scrollbar-thumb-rounded-lg w-full max-h-[300px] overflow-y-auto",a),children:[n,r&&i.length>0&&!x?(0,s.jsxs)(m.di,{role:"option",onSelect:()=>{l&&c(i),o("")},className:f,children:['Create "',i,'"']}):r&&0===u.length?(0,s.jsx)("div",{className:"p-2 py-1.5 text-xs text-foreground-lighter font-italic",children:"Type to add a value"}):(0,s.jsx)(m.rb,{children:(0,s.jsx)("span",{className:"text-foreground-muted",children:"No results found"})})]})});v.displayName="MultiSelectorList",p.List=v;let w=i.forwardRef((e,t)=>{let{className:a,value:n,children:r,...i}=e,{values:o,setInputValue:c,toggleValue:u,open:x}=h(),p=o.includes(n);return(0,s.jsxs)(m.di,{ref:t,tabIndex:x?0:-1,role:"option",onSelect:()=>{x&&u(n),c("")},className:(0,d.cn)(f,a),...i,children:[(0,s.jsx)("div",{className:(0,d.cn)("flex items-center justify-center","peer h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",p?"bg-foreground text-background":"[&_svg]:invisible"),children:(0,s.jsx)(l.Z,{className:"h-3 w-3",strokeWidth:4})}),(0,s.jsx)("div",{className:"text-xs flex-grow leading-none pointer-events-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:pointer-events-none peer-disabled:opacity-50",children:r})]})});w.displayName="MultiSelectorItem",p.Item=w},45057:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var s=a(97458),n=a(52983),r=a(65612),l=a(67190);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...a}=e,[o,c]=(0,n.useReducer)(i,null),d=(0,r.TA)({validateOnBlur:!0,...a,validationSchema:a.validationSchema,initialValues:a.initialValues,onSubmit:a.onSubmit,validate:t||function(){return o}});return(0,s.jsx)("form",{id:a.id,name:a.name,onSubmit:d.handleSubmit,className:a.className,style:a.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,s.jsx)(l.o,{values:d.values,errors:d.errors,formContextOnChange:d.handleChange,handleBlur:d.handleBlur,touched:d.touched,fieldLevelValidation:function(e,t){c({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:a.children({errors:d.errors,touched:d.touched,isSubmitting:d.isSubmitting,isValidating:d.isValidating,submitCount:d.submitCount,initialValues:d.initialValues,values:d.values,handleReset:d.handleReset,resetForm:d.resetForm,setFieldValue:d.setFieldValue})})})}},95:function(e,t,a){"use strict";var s=a(97458),n=a(52983),r=a(81381),l=a(14297),i=a(81228),o=a(99952),c=a(67190);t.Z=function(e){let{defaultValue:t,descriptionText:a,error:d,icon:u,inputRef:m,label:x,afterLabel:f,beforeLabel:h,labelOptional:p,layout:g,value:y,actions:b,size:j="medium",validation:v,id:w="",name:N="",...S}=e,P=(0,o.Z)("inputNumber"),{formContextOnChange:k,values:C,errors:A,handleBlur:I,touched:_,fieldLevelValidation:T}=(0,c.G)();C&&!y&&(y=C[w||N]),d||(A&&!d&&(d=A[w||N]),d=_&&_[w||N]?d:void 0),(0,n.useEffect)(()=>{v&&T(w,v(y))},[]);let E=[P.base];return d&&E.push(P.variants.error),d||E.push(P.variants.standard),u&&E.push(P.with_icon),j&&E.push(P.size[j]),S.disabled&&E.push(P.disabled),(0,s.jsx)("div",{className:S.className,"data-sentry-component":"InputNumber","data-sentry-source-file":"InputNumber.tsx",children:(0,s.jsx)(r.l,{label:x,afterLabel:f,beforeLabel:h,labelOptional:p,layout:g,id:w,error:d,descriptionText:a,style:S.style,size:j,"data-sentry-element":"FormLayout","data-sentry-source-file":"InputNumber.tsx",children:(0,s.jsxs)("div",{className:P.container,children:[(0,s.jsx)("input",{"data-size":j,id:w,name:N,onChange:function(e){S.onChange&&S.onChange(e),k&&k(e),v&&T(w,v(e.target.value))},onBlur:function(e){I&&I(e),S.onBlur&&S.onBlur(e)},type:"number",ref:m,value:y,className:E.join(" "),...S}),u&&(0,s.jsx)(i.Z,{size:j,icon:u}),d||b?(0,s.jsxs)("div",{className:P.actions_container,children:[d&&(0,s.jsx)(l.Z,{size:j}),b&&b]}):null]})})})}},59630:function(e,t,a){"use strict";a.d(t,{ZP:function(){return m}});var s=a(97458),n=a(52983),r=a(99952),l=a(53355);function i(e){let{children:t,className:a,tag:n="div",style:r}=e;return(0,s.jsx)("".concat(n),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:a=1,children:n,style:r}=e;return(0,s.jsx)("h".concat(a),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:n})},i.Text=function(e){let{className:t,children:a,style:n,type:r,disabled:l,mark:i,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:x}=e;return o?(0,s.jsx)("code",{style:n,children:a}):i?(0,s.jsx)("mark",{style:n,children:a}):c?(0,s.jsx)("kbd",{style:n,children:a}):m?(0,s.jsx)("strong",{style:n,children:a}):(0,s.jsx)("span",{style:n,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:a})},i.Link=function(e){let{children:t,target:a="_blank",href:n,className:r,onClick:l,style:i}=e;return(0,s.jsx)("a",{onClick:l,href:n,target:a,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,n.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,s.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:a,ulClassName:n,style:r,type:l="text"}=e;return(0,s.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)(c,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)("ul",{className:n,children:t})})})}u.Item=function(e){let{children:t,icon:a,active:n,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,x=(0,r.Z)("menu"),{type:f}=d(),h=[x.item.base];h.push(x.item.variants[f].base),n?h.push(x.item.variants[f].active):h.push(x.item.variants[f].normal);let p=[x.item.content.base];n?p.push(x.item.content.active):p.push(x.item.content.normal);let g=[x.item.icon.base];return n?g.push(x.item.icon.active):g.push(x.item.icon.normal),(0,s.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",h),style:m,onClick:o,"aria-current":n?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[a&&(0,s.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:a}),(0,s.jsx)("span",{className:p.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:a,title:n}=e,l=(0,r.Z)("menu"),{type:i}=d();return(0,s.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[a&&(0,s.jsx)("span",{className:l.group.icon,children:a}),(0,s.jsx)("span",{className:l.group.content,children:n}),t]})},u.Misc=function(e){let{children:t}=e;return(0,s.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)(i.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)("span",{children:t})})})};var m=u},94823:function(e,t,a){"use strict";a.d(t,{r:function(){return d}});var s=a(97458),n=a(56384),r=a(31706),l=a(52983),i=a(53355);let o=(0,r.j)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),c=(0,r.j)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),d=l.forwardRef((e,t)=>{let{className:a,size:r,...l}=e;return(0,s.jsx)(n.fC,{className:(0,i.cn)(o({size:r}),a),...l,ref:t,children:(0,s.jsx)(n.bU,{className:(0,i.cn)(c({size:r}))})})});d.displayName=n.fC.displayName},56384:function(e,t,a){"use strict";a.d(t,{bU:function(){return w},fC:function(){return v}});var s=a(83573),n=a(52983),r=a(12527),l=a(61031),i=a(95831),o=a(29650),c=a(87178),d=a(56807),u=a(36986);let m="Switch",[x,f]=(0,i.b)(m),[h,p]=x(m),g=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:a,name:i,checked:c,defaultChecked:d,required:m,disabled:x,value:f="on",onCheckedChange:p,...g}=e,[y,v]=(0,n.useState)(null),w=(0,l.e)(t,e=>v(e)),N=(0,n.useRef)(!1),S=!y||!!y.closest("form"),[P=!1,k]=(0,o.T)({prop:c,defaultProp:d,onChange:p});return(0,n.createElement)(h,{scope:a,checked:P,disabled:x},(0,n.createElement)(u.WV.button,(0,s.Z)({type:"button",role:"switch","aria-checked":P,"aria-required":m,"data-state":j(P),"data-disabled":x?"":void 0,disabled:x,value:f},g,{ref:w,onClick:(0,r.M)(e.onClick,e=>{k(e=>!e),S&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})})),S&&(0,n.createElement)(b,{control:y,bubbles:!N.current,name:i,value:f,checked:P,required:m,disabled:x,style:{transform:"translateX(-100%)"}}))}),y=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:a,...r}=e,l=p("SwitchThumb",a);return(0,n.createElement)(u.WV.span,(0,s.Z)({"data-state":j(l.checked),"data-disabled":l.disabled?"":void 0},r,{ref:t}))}),b=e=>{let{control:t,checked:a,bubbles:r=!0,...l}=e,i=(0,n.useRef)(null),o=(0,c.D)(a),u=(0,d.t)(t);return(0,n.useEffect)(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==a&&t){let s=new Event("click",{bubbles:r});t.call(e,a),e.dispatchEvent(s)}},[o,a,r]),(0,n.createElement)("input",(0,s.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:a},l,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function j(e){return e?"checked":"unchecked"}let v=g,w=y}},function(e){e.O(0,[6665,9557,588,7037,2383,6402,2132,8703,9910,5523,2967,4969,3862,441,6866,8058,3697,2224,8029,2732,5612,5518,171,1877,706,4331,9258,2769,9774,2888,179],function(){return e(e.s=58656)}),_N_E=e.O()}]);