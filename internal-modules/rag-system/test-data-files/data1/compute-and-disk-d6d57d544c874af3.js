!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bd5eafb3-8052-4fcd-8900-2ed0cac68315",e._sentryDebugIdIdentifier="sentry-dbid-bd5eafb3-8052-4fcd-8900-2ed0cac68315")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2218],{23501:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/compute-and-disk",function(){return a(73772)}])},34467:function(e,t,a){"use strict";a.d(t,{b:function(){return d}});var i=a(36457),s=a(64618),r=a(34549),n=a(64472),o=a(14123);async function l(e){let{projectRef:t,variant:a,type:i}=e;if(!t)throw Error("projectRef is required");if(!a)throw Error("variant is required");if(!i)throw Error("type is required");let{data:s,error:r}=await (0,n.v_)("/platform/projects/{ref}/billing/addons",{params:{path:{ref:t}},body:{addon_type:i,addon_variant:a}});return r&&(0,n.S3)(r),s}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.NL)();return(0,s.D)(e=>l(e),{async onSuccess(t,a,i){let{projectRef:s}=a;await n.invalidateQueries(o.U.addons(s)),await (null==e?void 0:e(t,a,i))},async onError(e,a,i){void 0===t?r.Am.error("Failed to update addon: ".concat(e.message)):t(e,a,i)},...a})}},68969:function(e,t,a){"use strict";a.d(t,{p:function(){return s}});var i=a(73614);function s(e){switch(e){case i.aA.AWS.id:return"ARM";case i.aA.FLY.id:return"x86 64-bit";default:return""}}},73772:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eA}});var i=a(97458),s=a(52585),r=a(40540),n=a(36457),o=a(59171),l=a(16402),d=a(35935),c=a(89462),u=a.n(c),m=a(82943),p=a(52983),h=a(86848),x=a(34549),f=a(54580),g=a(41888),v=a(97847),y=a(9846),j=a(5170),b=a(20101),S=a(28894),w=a(64472),z=a(94220);async function N(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:i,error:s}=await (0,w.U2)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:a}},signal:t});return s&&(0,w.S3)(s),i}let k=function(e){let{projectRef:t}=e,{enabled:a=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,S.a)(z.U.diskAutoscaleConfig(t),e=>{let{signal:a}=e;return N({projectRef:t},a)},{enabled:a&&void 0!==t,...i})};var P=a(64618);async function I(e){let{projectRef:t,growthPercent:a,maxSizeGb:i,minIncrementGb:s}=e;if(!t)throw Error("projectRef is required");let{data:r,error:n}=await (0,w.v_)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:t}},body:{growth_percent:a,max_size_gb:i,min_increment_gb:s}});return n&&(0,w.S3)(n),r}let _=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.NL)();return(0,P.D)(e=>I(e),{async onSuccess(t,a,s){let{projectRef:r}=a;await i.invalidateQueries(z.U.diskAutoscaleConfig(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,i){void 0===t?x.Am.error("Failed to update disk autoscale config: ".concat(e.message)):t(e,a,i)},...a})};var F=a(46164),O=a(50873),C=a(42725),T=a(29139),D=a(34467),G=a(45611),M=a(25155),V=a(29375),E=a(7611),A=a(55861),B=a(73614),U=a(1006),Z=a(94997),L=a(65422),R=a(81523),W=a(53355),q=a(648),Y=a(17317),H=a(54809),J=a(81451),X=a(69240),Q=a(89329),$=a(21758),K=a(17634),ee=a(11644),et=a(80255),ea=a(67054);let ei=(0,p.forwardRef)((e,t)=>{let{children:a,label:s}=e;return(0,i.jsxs)("div",{ref:t,className:"flex -space-x-px",children:[a,(0,i.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:s})})]})});ei.displayName="InputPostTab";let es=e=>{let{form:t}=e,{ref:a}=(0,f.UO)(),{control:s,setValue:r,formState:{errors:n}}=t,{totalSize:o,growthPercent:l,maxSizeGb:d,minIncrementGb:c}=t.watch(),{error:u,isLoading:m,isError:p}=k({projectRef:a}),h=null!=l?l:et.oc.growthPercent,x=null!=c?c:et.oc.minIncrementSize,g=n.maxSizeGb?et.oc.maxSizeGb:null!=d?d:et.oc.maxSizeGb,v=Math.floor(h/100*o),y=Math.min(Math.max(Math.floor(o*h/100),x),200)+o,j=y<g?y:g,b=j-o;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.Wi,{name:"growthPercent",control:s,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ee.E,{layout:"horizontal",label:"Autoscale growth percent",id:a.name,labelOptional:"Percentage of current disk size to grow",description:n.growthPercent?void 0:"This amounts to ".concat(v," GB based on the current disk size of ").concat(o," GB"),className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(ei,{label:"%",children:m?(0,i.jsx)("div",{className:(0,W.cn)((0,$.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(K.O,{className:"w-10 h-4"})}):(0,i.jsx)(U.NI,{children:(0,i.jsx)($.I,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-20",value:null!==(t=a.value)&&void 0!==t?t:void 0,disabled:p,onChange:e=>{r("growthPercent",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(et.oc.growthPercent)})})}),u&&(0,i.jsx)(ea.Z,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsx)(U.Wi,{name:"minIncrementGb",control:s,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ee.E,{layout:"horizontal",label:"Minimum increment",id:a.name,labelOptional:"Minimum value to autoscale disk size by",description:c&&c>v&&!n.minIncrementGb?"This value takes precedence as the minimum increment is larger than the growth percent":void 0,className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(ei,{label:"GB",children:m?(0,i.jsx)("div",{className:(0,W.cn)((0,$.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(K.O,{className:"w-10 h-4"})}):(0,i.jsx)(U.NI,{children:(0,i.jsx)($.I,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!==(t=a.value)&&void 0!==t?t:void 0,disabled:p,onChange:e=>{r("minIncrementGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(et.oc.minIncrementSize)})})}),u&&(0,i.jsx)(ea.Z,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsx)(U.Wi,{name:"maxSizeGb",control:s,render:e=>{var t;let{field:a}=e;return(0,i.jsxs)(ee.E,{layout:"horizontal",label:"Maximum disk size",id:a.name,labelOptional:"Maximum size that the disk can grow to",className:"[&>div>span]:text-foreground-lighter",children:[(0,i.jsx)(ei,{label:"GB",children:m?(0,i.jsx)("div",{className:(0,W.cn)((0,$.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(K.O,{className:"w-10 h-4"})}):(0,i.jsx)(U.NI,{children:(0,i.jsx)($.I,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!==(t=a.value)&&void 0!==t?t:void 0,disabled:p,onChange:e=>{r("maxSizeGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(et.oc.maxSizeGb)})})}),u&&(0,i.jsx)(ea.Z,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,i.jsxs)(q.J,{type:"default",showIcon:!1,className:"[&>div]:text-foreground-light",children:["Disk size will automatically be expanded by"," ",(0,i.jsxs)("span",{className:"text-foreground",children:[String(b).length>4?b.toFixed(2):b," ","GB"]})," ","to a total of ",(0,i.jsxs)("span",{className:"text-foreground",children:[j," GB"]})," ","when the database reaches 90% of the disk size"]})]})};var er=a(59113),en=a(88122);let eo=(0,en.Z)("Microchip",[["path",{d:"M18 12h2",key:"quuxs7"}],["path",{d:"M18 16h2",key:"zsn3lv"}],["path",{d:"M18 20h2",key:"9x5y9y"}],["path",{d:"M18 4h2",key:"1luxfb"}],["path",{d:"M18 8h2",key:"nxqzg"}],["path",{d:"M4 12h2",key:"1ltxp0"}],["path",{d:"M4 16h2",key:"8a5zha"}],["path",{d:"M4 20h2",key:"27dk57"}],["path",{d:"M4 4h2",key:"10groj"}],["path",{d:"M4 8h2",key:"18vq6w"}],["path",{d:"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z",key:"1681fp"}]]),el=(0,en.Z)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);var ed=a(68969),ec=a(67855),eu=a(33413),em=a(60804),ep=a(61096);function eh(e){var t,a,s,r;let{form:n,disabled:o}=e,{ref:l}=(0,f.UO)(),d=(0,E.l)(),{control:c,formState:m,setValue:h,trigger:x}=n,{data:v}=(0,T.Gl)({orgSlug:null==d?void 0:d.slug}),{project:j,isLoading:b}=(0,g.d2)(),{data:S,isLoading:w,error:z}=(0,G.F)({projectRef:l}),N=b||w,k=(0,p.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.available_addons)&&void 0!==e?e:[]},[S]),P=(0,p.useMemo)(()=>(0,J.uV)(k,null==j?void 0:j.cloud_provider),[k,null==j?void 0:j.cloud_provider]),I=(0,J.yg)({availableOptions:P,oldComputeSize:(null===(t=n.formState.defaultValues)||void 0===t?void 0:t.computeSize)||"ci_micro",newComputeSize:n.getValues("computeSize"),plan:null!==(a=null==v?void 0:v.plan.id)&&void 0!==a?a:"free"}),_=(0,J.gS)(null!==(s=null==v?void 0:v.plan.id)&&void 0!==s?s:"free",null!==(r=null==j?void 0:j.infra_compute_size)&&void 0!==r?r:"nano");return(0,i.jsx)(U.Wi,{name:"computeSize",control:c,render:e=>{let{field:t}=e;return(0,i.jsx)(ec.W,{...t,onValueChange:e=>{h("computeSize",e,{shouldDirty:!0,shouldValidate:!0}),x("provisionedIOPS"),x("throughput")},defaultValue:t.value,disabled:o,children:(0,i.jsx)(ee.E,{layout:"horizontal",label:"Compute size",id:t.name,className:"md:flex lg:grid gap-4 lg:gap-2",labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em.G,{className:"mb-2",show:m.isDirty&&m.dirtyFields.computeSize&&!m.errors.computeSize,beforePrice:Number(I.oldPrice),afterPrice:Number(I.newPrice),free:!!_&&"ci_micro"===n.watch("computeSize")}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Hardware resources allocated to your Postgres database"}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(y.G,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/compute-and-disk"})}),(0,i.jsx)(ep.P,{showIcon:!1,type:"default",className:"mt-3 border-violet-900 bg-violet-200 [&_h5]:text-violet-1100",visible:_&&"ci_nano"===n.watch("computeSize"),title:"Upgrade to Micro Compute at no additional charge",description:"This Project is already paying for Micro Compute. You can upgrade to Micro Compute at any time when convenient."})]}),children:(0,i.jsx)("div",{className:z?"":"grid grid-cols-2 xl:grid-cols-3 flex-wrap gap-3",children:N?Array(10).fill(0).map((e,t)=>(0,i.jsx)(K.O,{className:"w-full h-[110px] rounded-md"},t)):z?(0,i.jsx)(ea.Z,{message:"Failed to load Compute size options",type:"error",children:(0,i.jsx)("p",{children:null==z?void 0:z.message})}):(0,i.jsxs)(i.Fragment,{children:[P.map(e=>{var t,a,s,r,n,l;let d=(0,ed.p)(null==j?void 0:j.cloud_provider),c=(null==v?void 0:v.plan.id)!=="free"&&(null==j?void 0:j.infra_compute_size)!=="nano"&&"ci_nano"===e.identifier,u=(null==v?void 0:v.plan.id)!=="free"&&(null==j?void 0:j.infra_compute_size)==="nano"&&"ci_nano"===e.identifier?null===(t=P.find(e=>"ci_micro"===e.identifier))||void 0===t?void 0:t.price:e.price;return(0,i.jsx)(ec.Y,{id:e.identifier,showIndicator:!1,value:e.identifier,className:(0,W.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]",c&&"opacity-50"),disabled:o||c,label:(0,i.jsxs)(i.Fragment,{children:[_&&"ci_micro"===e.identifier&&(0,i.jsx)("div",{className:"absolute -top-4 -right-3 text-violet-1100 flex items-center gap-1 bg-surface-75 py-0.5 px-2 rounded-full border border-violet-900",children:(0,i.jsx)("span",{children:"No additional charge"})}),(0,i.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,i.jsxs)("div",{className:"relative px-3 opacity-50 group-data-[state=checked]:opacity-100 flex justify-between",children:[(0,i.jsx)(eu.e,{className:"inline-flex font-semibold",infraComputeSize:e.name}),(0,i.jsx)("div",{className:"flex items-center space-x-1",children:c?(0,i.jsx)("div",{className:"bg border rounded-lg h-7 w-7 flex items-center justify-center",children:(0,i.jsx)(er.Z,{size:14})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"text-foreground text-sm font-semibold",children:["$",u]}),(0,i.jsxs)("span",{className:"text-foreground-light translate-y-[1px]",children:[" ","/ ","monthly"===e.price_interval?"month":"hour"]})]})})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(eo,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsxs)("span",{children:["ci_nano"===e.identifier&&"Up to ",null!==(n=null===(a=e.meta)||void 0===a?void 0:a.memory_gb)&&void 0!==n?n:0," GB memory"]})]}),(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(el,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsxs)("span",{children:[null!==(l=null===(s=e.meta)||void 0===s?void 0:s.cpu_cores)&&void 0!==l?l:0,(null===(r=e.meta)||void 0===r?void 0:r.cpu_cores)!=="Shared"&&"-core ".concat(d)," ","CPU"]})]})]})})]})]})},e.identifier)}),(0,i.jsx)(ec.Y,{id:"larger-compute",showIndicator:!1,value:"larger-compute",onClick:e=>e.preventDefault(),className:(0,W.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]"),label:(0,i.jsx)(u(),{href:"/support/new?ref=".concat(l,"&category=sales&subject=Enquiry%20about%20larger%20instance%20sizes"),children:(0,i.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,i.jsxs)("div",{className:"relative px-3 flex justify-between",children:[(0,i.jsx)(eu.e,{infraComputeSize:">16XL"}),(0,i.jsx)("div",{className:"flex items-center space-x-1 opacity-50 ",children:(0,i.jsx)("span",{className:"text-foreground-light text-sm",children:"Contact Us"})})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(eo,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsx)("span",{children:"Custom memory"})]}),(0,i.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,i.jsx)(el,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,i.jsx)("span",{children:"Custom CPU"})]})]})})]})})},"larger-compute")]})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"ComputeSizeField","data-sentry-source-file":"ComputeSizeField.tsx"})}var ex=a(28977),ef=a.n(ex),eg=a(14612),ev=a(89584),ey=a(87615);function ej(e){let{actions:t,form:a}=e,{watch:s}=a,r=s("totalSize"),n=s("storageType")===et.Hb.GP3&&r>et.lB[et.Hb.GP3].maxStorage,d=et.gP.find(e=>e.type===et.Hb.IO2);return(0,i.jsx)(o.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskTypeRecommendationSection.tsx",children:n&&(0,i.jsx)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,i.jsx)(q.J,{type:"default",title:"You will need to use ".concat(null==d?void 0:d.name," to use a larger Disk size"),children:(0,i.jsx)("div",{className:"flex flex-col gap-2",children:t&&(0,i.jsx)("div",{children:t})})})})})}var eb=a(50422);function eS(e){let{isDirty:t,onClick:a}=e;return(0,i.jsx)(o.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"InputResetButton","data-sentry-source-file":"InputResetButton.tsx",children:t&&(0,i.jsx)(l.E.div,{initial:{opacity:0,scale:.95,x:-2},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.95,x:-2},transition:{duration:.12},children:(0,i.jsx)(Z.z,{htmlType:"button",type:"default",size:"small",className:"px-2 text-foreground-light",onClick:a,children:(0,i.jsx)(eb.Z,{className:"h-4 w-4","aria-hidden":"true"})})},"reset-disksize")})}function ew(e){var t,a,s,r,n,o,l;let{form:d,disableInput:c,setAdvancedSettingsOpenState:u}=e,{ref:m}=(0,f.UO)(),{control:p,formState:h,setValue:x,trigger:g,getValues:v,resetField:b,watch:S}=d,w=(0,E.l)(),z=(0,eg.Vm)(),{isLoading:N,error:k,isError:P}=(0,j.IG)({projectRef:m}),{data:I,error:_,isError:O}=(0,T.Gl)({orgSlug:null==w?void 0:w.slug}),{data:C,error:D,isError:G}=(0,F.C)({projectRef:m}),M=_||D||k,V=O||G||P,A=10>ef().utc().diff(ef().utc(null==z?void 0:z.inserted_at),"minute")||(null==z?void 0:z.status)==="COMING_UP",L=S("storageType"),R=S("totalSize"),q=null!==(n=null==I?void 0:I.plan.id)&&void 0!==n?n:"free",{includedDiskGB:Y}=null!==(o=null===et.UT||void 0===et.UT?void 0:et.UT[q])&&void 0!==o?o:{},H=Y[L],X=(0,J.Pl)({planId:q,oldSize:(null===(t=h.defaultValues)||void 0===t?void 0:t.totalSize)||0,oldStorageType:null===(a=h.defaultValues)||void 0===a?void 0:a.storageType,newSize:v("totalSize"),newStorageType:v("storageType")}),Q=!!h.dirtyFields.totalSize,es=Math.round((null!==(l=null==C?void 0:C.metrics.fs_used_bytes)&&void 0!==l?l:0)/B.GB*100)/100;return(0,i.jsxs)("div",{className:"grid grid-cols-12 gap-5","data-sentry-component":"DiskSizeField","data-sentry-source-file":"DiskSizeField.tsx",children:[(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(U.Wi,{name:"totalSize",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(ee.E,{label:"Disk Size",layout:"vertical",id:t.name,children:(0,i.jsxs)("div",{className:"relative flex gap-2 items-center",children:[(0,i.jsx)(ei,{label:"GB",children:N?(0,i.jsx)("div",{className:(0,W.cn)((0,$.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(K.O,{className:"w-10 h-4"})}):(0,i.jsx)(U.NI,{children:(0,i.jsx)($.I,{type:"number",id:t.name,...t,disabled:c||V,className:"w-32 font-mono rounded-r-none",onWheel:e=>e.currentTarget.blur(),onChange:e=>{x("totalSize",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0}),g("provisionedIOPS"),g("throughput")},min:H})})}),(0,i.jsx)(eS,{isDirty:Q,onClick:()=>{b("totalSize"),g("provisionedIOPS")}})]})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"DiskSizeField.tsx"}),(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)(em.G,{className:"mt-1",beforePrice:Number(X.oldPrice),afterPrice:Number(X.newPrice),show:h.isDirty&&!h.errors.totalSize&&X.oldPrice!==X.newPrice,"data-sentry-element":"BillingChangeBadge","data-sentry-source-file":"DiskSizeField.tsx"}),(0,i.jsxs)("span",{className:"text-foreground-lighter text-sm",children:[H>0&&(null==I?void 0:I.plan.id)&&"Your plan includes ".concat(H," GB of disk size for ").concat(L,"."),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(y.G,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/database-size","data-sentry-element":"DocsButton","data-sentry-source-file":"DiskSizeField.tsx"})})]}),(0,i.jsx)(ej,{form:d,actions:(0,i.jsx)(Z.z,{type:"default",onClick:()=>{x("storageType","io2"),g("provisionedIOPS"),g("totalSize"),u(!0)},children:"Change to High Performance SSD"}),"data-sentry-element":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskSizeField.tsx"})]})]}),(0,i.jsxs)("div",{className:"col-span-8",children:[(0,i.jsx)(ey.Z,{form:d,"data-sentry-element":"DiskSpaceBar","data-sentry-source-file":"DiskSizeField.tsx"}),A?(0,i.jsx)(ea.Z,{message:"Disk size data is not available for ~10 minutes after project creation",type:"error"}):M&&(0,i.jsx)(ea.Z,{message:"Failed to load disk size data",type:"error",children:null==M?void 0:M.message}),(0,i.jsx)(ev.hd,{isDirty:void 0!==h.dirtyFields.totalSize,totalSize:1.25*((null===(s=h.defaultValues)||void 0===s?void 0:s.totalSize)||0),usedSize:es,newTotalSize:1.25*R,oldStorageType:null===(r=h.defaultValues)||void 0===r?void 0:r.storageType,newStorageType:v("storageType"),"data-sentry-element":"DiskManagementDiskSizeReadReplicas","data-sentry-source-file":"DiskSizeField.tsx"})]})]})}function ez(e){let{actions:t,form:a}=e,{watch:s}=a,r=s("computeSize"),n=s("provisionedIOPS"),d=(0,J.b4)(n),c=n>(0,J.vf)(null!=r?r:"ci_micro")&&!et.Pc.includes(r);return(0,i.jsx)(o.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ComputeSizeRecommendationSection","data-sentry-source-file":"ComputeSizeRecommendationSection.tsx",children:c&&(0,i.jsx)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,i.jsx)(q.J,{type:"default",title:"Your Compute size can only support a baseline IOPS of ".concat(et.sS[r]),children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["To achieve sustained IOPS performance we recommend using the"," ",(0,i.jsx)("span",{className:"text-foreground",children:(0,J.kW)(d)})," ","compute size."]})}),t&&(0,i.jsx)("div",{children:t})]})})})})}function eN(e){var t,a,s;let{form:r,disableInput:n}=e,{ref:o}=(0,f.UO)(),{control:l,formState:d,setValue:c,trigger:u,getValues:m,watch:p}=r,h=p("storageType"),x=p("computeSize"),g=null!==(s=p("provisionedIOPS"))&&void 0!==s?s:0,{isLoading:v,error:y,isError:b}=(0,j.IG)({projectRef:o}),S=(0,J.G0)({oldStorageType:null===(t=d.defaultValues)||void 0===t?void 0:t.storageType,oldProvisionedIOPS:(null===(a=d.defaultValues)||void 0===a?void 0:a.provisionedIOPS)||0,newStorageType:m("storageType"),newProvisionedIOPS:m("provisionedIOPS")}),w=et.Pc.includes(x)&&"gp3"===h;return(0,i.jsx)(U.Wi,{control:l,name:"provisionedIOPS",render:e=>{var t,a,s,o,l;let{field:p}=e,f=(0,J.b4)(g);return(0,i.jsxs)(ee.E,{layout:"horizontal",label:"IOPS",id:p.name,description:(0,i.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,i.jsx)("p",{children:"Use higher IOPS for high-throughput apps."}),(0,i.jsx)(ez,{form:r,actions:(0,i.jsxs)(Z.z,{type:"default",onClick:()=>{c("computeSize",null!=f?f:"ci_nano"),u("provisionedIOPS")},children:["Update to ",(0,J.kW)(f)]})}),!d.errors.provisionedIOPS&&(0,i.jsx)(ev.fl,{isDirty:void 0!==d.dirtyFields.provisionedIOPS,oldIOPS:null!==(l=null===(t=d.defaultValues)||void 0===t?void 0:t.provisionedIOPS)&&void 0!==l?l:0,newIOPS:p.value,oldStorageType:null===(a=d.defaultValues)||void 0===a?void 0:a.storageType,newStorageType:m("storageType")})]}),labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em.G,{show:(h!==(null===(s=d.defaultValues)||void 0===s?void 0:s.storageType)||"gp3"===h&&p.value!==(null===(o=d.defaultValues)||void 0===o?void 0:o.provisionedIOPS))&&!d.errors.provisionedIOPS&&!w,beforePrice:Number(S.oldPrice),afterPrice:Number(S.newPrice),className:"mb-2"}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Input/output operations per second."})]}),children:[(0,i.jsx)(ei,{label:"IOPS",children:v?(0,i.jsx)("div",{className:(0,W.cn)((0,$.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(K.O,{className:"w-10 h-4"})}):(0,i.jsx)(U.NI,{children:(0,i.jsx)($.I,{type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",...p,value:w?et.sS[x]:p.value,disabled:n||w||b,onChange:e=>{c("provisionedIOPS",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})}})})}),y&&(0,i.jsx)(ea.Z,{type:"error",message:y.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"IOPSField","data-sentry-source-file":"IOPSField.tsx"})}var ek=a(72010),eP=a(48245),eI=a(54888),e_=a(35772);let eF=["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","us-east-1","us-east-2","us-west-1","us-west-2"];function eO(e){var t;let{form:a,disableInput:s}=e,{control:r,trigger:n}=a,o=(0,eg.Vm)(),{ref:l}=(0,f.UO)(),d=eF.includes(null!==(t=null==o?void 0:o.region)&&void 0!==t?t:""),{isLoading:c,error:u,isError:m}=(0,j.IG)({projectRef:l});return(0,i.jsx)(U.Wi,{name:"storageType",control:r,render:e=>{let{field:t}=e;return(0,i.jsxs)(ee.E,{layout:"horizontal",label:"Storage type",children:[(0,i.jsxs)(eP.Ph,{...t,onValueChange:async e=>{t.onChange(e),"gp3"===e?a.getFieldState("provisionedIOPS").isDirty||a.setValue("provisionedIOPS",et.lB[et.Hb.GP3].minIops):a.getFieldState("provisionedIOPS").isDirty||a.setValue("provisionedIOPS",et.lB[et.Hb.IO2].minIops),await n("provisionedIOPS"),await n("totalSize")},defaultValue:t.value,disabled:s||m,children:[c?(0,i.jsx)(K.O,{className:(0,W.cn)((0,Z.d)({size:"small"}),"h-14 min-w-[420px] duration-[2s]")}):(0,i.jsx)(U.NI,{children:(0,i.jsx)(eP.i4,{className:"h-14 max-w-[420px]",children:(0,i.jsx)(eP.ki,{})})}),(0,i.jsx)(eP.Bw,{children:(0,i.jsx)(i.Fragment,{children:et.gP.map(e=>{let t="io2"===e.type&&!d;return(0,i.jsxs)(eI.u,{children:[(0,i.jsx)(eI.aJ,{asChild:!0,children:(0,i.jsx)(eP.Ql,{disabled:s||t,value:e.type,className:(0,W.cn)(t&&"!pointer-events-auto"),children:(0,i.jsxs)("div",{className:"flex flex-col gap-0 items-start",children:[(0,i.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,i.jsx)("span",{className:"text-sm text-foreground",children:e.name})," ",(0,i.jsx)("div",{children:(0,i.jsx)(e_.C,{variant:"outline",className:"font-mono bg-alternative bg-opacity-100",children:e.type})})]}),(0,i.jsx)("p",{className:"text-foreground-light",children:e.description})]})},e.type)}),t&&(0,i.jsxs)(eI._v,{side:"right",className:"w-64",children:["IO2 Volume Type is not available in your project's region (",null==o?void 0:o.region,"). More information available"," ",(0,i.jsx)(ek.U,{href:"https://docs.aws.amazon.com/ebs/latest/userguide/provisioned-iops.html#io2-bx-considerations",children:"here"}),"."]})]})})})})]}),u&&(0,i.jsx)(ea.Z,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"StorageTypeField","data-sentry-source-file":"StorageTypeField.tsx"})}function eC(e){var t,a;let{form:s,disableInput:r}=e,{ref:n}=(0,f.UO)(),{control:d,formState:c,setValue:u,getValues:m,watch:h}=s,x=h("storageType"),g=h("totalSize"),v=h("computeSize"),y=null===(t=c.defaultValues)||void 0===t?void 0:t.throughput,{isLoading:b,error:S}=(0,j.IG)({projectRef:n}),w=(0,J.r8)({storageType:s.getValues("storageType"),newThroughput:s.getValues("throughput")||0,oldThroughput:(null===(a=s.formState.defaultValues)||void 0===a?void 0:a.throughput)||0}),z=et.Pc.includes(v)&&"gp3"===x;return(0,p.useEffect)(()=>{if("io2"===x)u("throughput",void 0);else if("gp3"===x){let e=s.getValues("throughput"),{min:t,max:a}=et.YX[et.Hb.GP3];(!e||e<t||e>a)&&u("throughput",t)}},[x,g,u,s]),(0,i.jsx)(o.M,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ThroughputField","data-sentry-source-file":"ThroughputField.tsx",children:"gp3"===m("storageType")&&(0,i.jsx)(l.E.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{duration:.1},style:{overflow:"hidden"},children:(0,i.jsx)(U.Wi,{name:"throughput",control:d,render:e=>{var t,a;let{field:s}=e;return(0,i.jsxs)(ee.E,{label:"Throughput",layout:"horizontal",description:(0,i.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,i.jsx)("p",{children:"Higher throughput suits applications with high data transfer needs."}),!c.errors.throughput&&(0,i.jsx)(ev.l7,{isDirty:void 0!==c.dirtyFields.throughput,oldThroughput:null!=y?y:0,newThroughput:null!==(a=s.value)&&void 0!==a?a:0,oldStorageType:null===(t=c.defaultValues)||void 0===t?void 0:t.storageType,newStorageType:m("storageType")})]}),labelOptional:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em.G,{show:c.isDirty&&c.dirtyFields.throughput&&!c.errors.throughput,beforePrice:Number(w.oldPrice),afterPrice:Number(w.newPrice),className:"mb-2"}),(0,i.jsx)("p",{className:"text-foreground-lighter",children:"Amount of data read/written per second."})]}),children:[(0,i.jsx)(ei,{label:"MB/s",children:b?(0,i.jsx)("div",{className:(0,W.cn)((0,$.h)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,i.jsx)(K.O,{className:"w-10 h-4"})}):(0,i.jsx)(U.NI,{children:(0,i.jsx)($.I,{type:"number",...s,value:z?et.Qq[v]:s.value,onChange:e=>{u("throughput",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},className:"flex-grow font-mono rounded-r-none max-w-32",disabled:r||z||"io2"===x})})}),S&&(0,i.jsx)(ea.Z,{type:"error",message:S.message})]})}})},"throughPutContainer")})}var eT=a(22134),eD=a(98178);function eG(){var e,t,a,c;let{project:S,isLoading:w}=(0,g.d2)(),z=(0,E.l)(),{ref:N}=(0,f.UO)(),P=(0,n.NL)(),I=(0,m.useRouter)(),$=(0,A.P)("diskAndComputeForm"),{data:K}=(0,M.q)(),ee=null===(e=null!=K?K:[])||void 0===e?void 0:e.find(e=>e.project===(null==S?void 0:S.ref)),ea=null==ee?void 0:ee.is_readonly_mode_enabled,ei=(0,V.N4)(),er=(0,V.Xo)(r.KA.UPDATE,"projects",{resource:{project_id:null==S?void 0:S.id}}),[en,eo]=(0,p.useState)(!1),[el,ed]=(0,p.useState)(!1),[ec,eu]=(0,p.useState)(null),[em,ex]=(0,p.useState)(!1),{data:ef,isSuccess:eg}=(0,C.bN)({projectRef:N}),{data:ev,isSuccess:ey}=(0,j.IG)({projectRef:N},{refetchInterval:el,refetchOnWindowFocus:!1,onSuccess:e=>{var t;let{type:a,iops:i,throughput_mbps:s,size_gb:r}=null!==(t=null==e?void 0:e.attributes)&&void 0!==t?t:{size_gb:0};"requested_modification"in e||!1===el||(eL.reset({storageType:a,provisionedIOPS:i,throughput:s,totalSize:r}),ed(!1),x.Am.success("Disk configuration changes have been successfully applied!"))}}),{isSuccess:ej}=(0,G.F)({projectRef:N}),{isWithinCooldownWindow:eb,isSuccess:eS}=(0,j.WU)({projectRef:N}),{data:ez,isSuccess:ek}=(0,F.C)({projectRef:N}),{data:eP,isSuccess:eI}=(0,T.Gl)({orgSlug:null==z?void 0:z.slug}),{data:e_,isSuccess:eF}=k({projectRef:N}),{type:eG,iops:eM,throughput_mbps:eV,size_gb:eE}=null!==(a=null==ev?void 0:ev.attributes)&&void 0!==a?a:{size_gb:0},{growth_percent:eA,max_size_gb:eB,min_increment_gb:eU}=null!=e_?e_:{},eZ={storageType:null!=eG?eG:et.Hb.GP3,provisionedIOPS:eM,throughput:eV,totalSize:eE,computeSize:(null==S?void 0:S.infra_compute_size)?(0,J.jV)(null==S?void 0:S.infra_compute_size):void 0,growthPercent:eA,minIncrementGb:eU,maxSizeGb:eB},eL=(0,h.cI)({resolver:(0,s.F)((0,H.m)(eZ.totalSize)),defaultValues:eZ,mode:"onBlur",reValidateMode:"onChange"}),eR=ej&&ey&&ek&&eg&&eI&&eF&&eS,eW=(null==ev?void 0:ev.requested_modification)!==void 0,eq=(null!=ef?ef:[]).filter(e=>e.identifier!==N),eY=(null==eP?void 0:eP.plan.id)==="free",{formState:eH}=eL,eJ=Math.round((null!==(c=null==ez?void 0:ez.metrics.fs_used_bytes)&&void 0!==c?c:0)/B.GB*100)/100,eX=(null===(t=eH.defaultValues)||void 0===t?void 0:t.totalSize)||0,eQ=(null==S?void 0:S.cloud_provider)==="FLY",e$=et.Li.includes(eL.watch("computeSize"))&&(null==eP?void 0:eP.plan.id)!=="free",eK=eW||eY||eb||!er||eQ,e0=!!Object.keys(eL.formState.dirtyFields).length,e2=(null==S?void 0:S.status)===B.S.RESIZING,e1=eW&&!e2,e4=ei&&!er&&!w,{mutateAsync:e3,isLoading:e5}=(0,b.H$)({onError:()=>{},onSuccess:()=>ed(2e3)}),{mutateAsync:e8,isLoading:e6}=(0,D.b)({onError:()=>{},onSuccess:()=>{(0,O.k7)(P,N,B.S.RESIZING)}}),{mutateAsync:e7,isLoading:e9}=_({onError:()=>{}}),te=async e=>{let t=!1;eu(null);try{var a,i,s,r,n,o,l,d;(e.storageType!==(null===(a=eL.formState.defaultValues)||void 0===a?void 0:a.storageType)||e.provisionedIOPS!==(null===(i=eL.formState.defaultValues)||void 0===i?void 0:i.provisionedIOPS)||e.throughput!==(null===(s=eL.formState.defaultValues)||void 0===s?void 0:s.throughput)||e.totalSize!==(null===(r=eL.formState.defaultValues)||void 0===r?void 0:r.totalSize))&&(t=!0,"gp3"===e.storageType&&et.Li.includes(e.computeSize)&&(e.provisionedIOPS=et.nG[et.Hb.GP3].min),await e3({ref:N,provisionedIOPS:e.provisionedIOPS,storageType:e.storageType,totalSize:e.totalSize,throughput:e.throughput})),(e.growthPercent!==(null===(n=eL.formState.defaultValues)||void 0===n?void 0:n.growthPercent)||e.minIncrementGb!==(null===(o=eL.formState.defaultValues)||void 0===o?void 0:o.minIncrementGb)||e.maxSizeGb!==(null===(l=eL.formState.defaultValues)||void 0===l?void 0:l.maxSizeGb))&&await e7({projectRef:N,growthPercent:e.growthPercent,minIncrementGb:e.minIncrementGb,maxSizeGb:e.maxSizeGb}),e.computeSize!==(null===(d=eL.formState.defaultValues)||void 0===d?void 0:d.computeSize)&&await e8({projectRef:N,variant:e.computeSize,type:"compute_instance",suppressToast:!0}),eo(!1),eL.reset(e),x.Am.success("Successfully updated disk settings!".concat(t?" The requested changes will be applied to your disk shortly.":""))}catch(e){eu({message:e instanceof Error?e.message:"An unknown error occurred",type:"error"})}};return(0,p.useEffect)(()=>{(ey||eR)&&eL.reset(eZ,{})},[eR,ey]),(0,p.useEffect)(()=>{void 0!==$&&!$&&N&&I.push("/project/".concat(N,"/settings/addons?panel=computeInstance"))},[$,N,I]),(0,i.jsx)(U.l0,{...eL,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"DiskManagementForm","data-sentry-source-file":"DiskManagementForm.tsx",children:(0,i.jsxs)("form",{onSubmit:eL.handleSubmit(te),className:"flex flex-col gap-8",children:[(0,i.jsxs)(v._S,{className:"relative flex flex-col gap-10",bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"DiskManagementForm.tsx",children:[(0,i.jsx)(ep.P,{type:"default",visible:eY,title:"Compute and Disk configuration is not available on the Free Plan",actions:(0,i.jsx)(Z.z,{type:"default",asChild:!0,children:(0,i.jsx)(u(),{href:"/org/".concat(null==z?void 0:z.slug,"/billing?panel=subscriptionPlan&source=diskManagementConfigure"),children:"Upgrade plan"})}),description:"You will need to upgrade to at least the Pro Plan to configure compute and disk","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),e2||e1||e4?(0,i.jsxs)("div",{className:"relative flex flex-col gap-10",children:[(0,i.jsx)(X.z,{visible:e2,title:"Your project will now automatically restart.",description:"Your project will be unavailable for up to 2 mins."}),(0,i.jsx)(ep.P,{type:"default",visible:e1,title:"Disk configuration changes have been requested",description:"The requested changes will be applied to your disk shortly"}),(0,i.jsx)(ep.P,{type:"default",visible:e4,title:"You do not have permission to update disk configuration",description:"Please contact your organization administrator to update your disk configuration"})]}):null,(0,i.jsx)(L.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(eh,{form:eL,disabled:eY,"data-sentry-element":"ComputeSizeField","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(L.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(eD.H,{"data-sentry-element":"SpendCapDisabledSection","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,i.jsx)(ep.P,{type:"default",visible:eQ,title:"Disk configuration is not available on Fly Postgres",description:"Please contact Fly support if you need to update your disk configuration","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),!eQ&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)(eT.D,{}),!ea&&eJ/eX*100>=90&&eb&&(0,i.jsx)(q.J,{type:"destructive",title:"Database size is currently over 90% of disk size",description:"Your project will enter read-only mode once you reach 95% of the disk space to prevent your database from exceeding the disk limitations",children:(0,i.jsx)(y.G,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#read-only-mode"})}),ea&&(0,i.jsx)(q.J,{type:"destructive",title:"Project is currently in read-only mode",description:"You will need to manually override read-only mode and reduce the database size to below 95% of the disk size",children:(0,i.jsx)(y.G,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#disabling-read-only-mode"})})]}),(0,i.jsx)(ew,{form:eL,disableInput:eK,setAdvancedSettingsOpenState:ex}),(0,i.jsx)(L.Z,{}),(0,i.jsxs)(R.zF,{className:"-space-y-px",open:em,onOpenChange:()=>ex(e=>!e),children:[(0,i.jsxs)(R.wy,{className:"px-8 py-3 w-full border flex items-center gap-6 rounded-t data-[state=closed]:rounded-b group justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col items-start",children:[(0,i.jsx)("span",{className:"text-sm text-foreground",children:"Advanced disk settings"}),(0,i.jsx)("span",{className:"text-sm text-foreground-light text-left",children:"Specify additional settings for your disk, including autoscaling configuration, IOPS, throughput, and disk type."})]}),(0,i.jsx)(d.Z,{size:16,className:"text-foreground-light transition-all group-data-[state=open]:rotate-90",strokeWidth:1})]}),(0,i.jsxs)(R.Fw,{className:(0,W.cn)("flex flex-col gap-8 py-8 transition-all","data-[state=open]:border data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"),children:[(0,i.jsx)("div",{className:"px-8 flex flex-col gap-y-8",children:(0,i.jsx)(es,{form:eL})}),(0,i.jsx)(L.Z,{}),(0,i.jsxs)("div",{className:"px-8 flex flex-col gap-y-8",children:[(0,i.jsx)(eO,{form:eL,disableInput:eK}),(0,i.jsx)(ep.P,{type:"default",visible:e$,title:"IOPS ".concat("gp3"===eL.getValues("storageType")?"and Throughput ":"","configuration requires LARGE Compute size or above"),actions:(0,i.jsx)(Z.z,{type:"default",onClick:()=>{eL.setValue("computeSize","ci_large")},children:"Change to LARGE Compute"})}),(0,i.jsx)(eN,{form:eL,disableInput:e$||eK}),(0,i.jsx)(eC,{form:eL,disableInput:e$||eK})]})]})]})]})]}),(0,i.jsx)(o.M,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskManagementForm.tsx",children:e0?(0,i.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.1,delay:.2},className:"z-10 w-full left-0 right-0 sticky bottom-0 bg-surface-100 border-t h-16 items-center flex",children:(0,i.jsxs)("div",{className:(0,W.cn)(v.y,v.s_,"flex items-center gap-3 justify-end"),children:[(0,i.jsx)(Y.C,{formState:eH}),(0,i.jsx)(Z.z,{type:"default",onClick:()=>eL.reset(),disabled:!e0,size:"medium",children:"Cancel"}),(0,i.jsx)(Q.B,{loading:e5||e6||e9,disabled:e4,form:eL,numReplicas:eq.length,isDialogOpen:en,onSubmit:te,setIsDialogOpen:eo,message:ec})]})}):null})]})})}var eM=a(51164),eV=a(26713);let eE=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v._S,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"compute-and-disk.tsx",children:(0,i.jsxs)(v.tU,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"compute-and-disk.tsx",children:[(0,i.jsx)(v.q7,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"compute-and-disk.tsx",children:"Compute and Disk"}),(0,i.jsx)(v.FW,{"data-sentry-element":"ScaffoldDescription","data-sentry-source-file":"compute-and-disk.tsx",children:"Configure the compute and disk settings for your project."})]})}),(0,i.jsx)(eG,{"data-sentry-element":"DiskManagementForm","data-sentry-source-file":"compute-and-disk.tsx"})]});eE.getLayout=e=>(0,i.jsx)(eM.Z,{children:(0,i.jsx)(eV.Z,{children:e})});var eA=eE},33413:function(e,t,a){"use strict";a.d(t,{e:function(){return n}});var i=a(97458),s=a(35772),r=a(53355);function n(e){let{infraComputeSize:t,className:a,...n}=e,o=(null==t?void 0:t.toLocaleLowerCase())==="micro"||(null==t?void 0:t.toLocaleLowerCase())==="nano";return(0,i.jsx)(s.C,{className:(0,r.cn)("rounded-md text-center flex justify-center font-mono uppercase","group-data-[state=open]:bg-opacity-20 group-data-[state=open]:ring-2 group-data-[state=open]:ring-opacity-20","transition-all",o?"group-data-[state=open]:ring-foreground-muted bg-opacity-50 group-data-[state=open]:bg-opacity-75":"group-data-[state=open]:ring-brand",a),variant:t?o?"default":"brand":"default",...n,"data-sentry-element":"Badge","data-sentry-component":"ComputeBadge","data-sentry-source-file":"index.tsx",children:t})}}},function(e){e.O(0,[6665,9557,588,7037,2383,6402,2132,8703,9910,5523,2967,4969,3862,441,6866,8058,3697,2224,8029,2732,3350,6713,171,1877,706,4331,9258,2769,6606,9774,2888,179],function(){return e(e.s=23501)}),_N_E=e.O()}]);